REM Basics

    LEVEL_VERSION(1)
    SET_GENERATE_SPEED(400)

    START_MONEY(PLAYER0,7500)
    START_MONEY(PLAYER3,20000)

    MAX_CREATURES(PLAYER0,15)
    MAX_CREATURES(PLAYER3,20)

    RUN_AFTER_VICTORY(1)

    SET_PLAYER_COLOR(PLAYER0, BLUE)

    SET_MUSIC("campaign_music/diablo_medley.mp3")

    COMPUTER_PLAYER(PLAYER3, 5)

REM Creatures

    ADD_CREATURE_TO_POOL(FLY,20)
    ADD_CREATURE_TO_POOL(BUG,20)
    ADD_CREATURE_TO_POOL(DEMONSPAWN,20)
    ADD_CREATURE_TO_POOL(SPIDER,20)
    ADD_CREATURE_TO_POOL(HELL_HOUND,20)
    ADD_CREATURE_TO_POOL(TENTACLE,20)
    ADD_CREATURE_TO_POOL(SORCEROR,20)

    CREATURE_AVAILABLE(ALL_PLAYERS,FLY,1,0)
    CREATURE_AVAILABLE(ALL_PLAYERS,BUG,1,0)
    CREATURE_AVAILABLE(ALL_PLAYERS,DEMONSPAWN,1,0)
    CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
    CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,0)
    CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE, 1, 0)
    CREATURE_AVAILABLE(ALL_PLAYERS,SORCEROR,1,0)

REM Rooms

    ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,1,1)
    ROOM_AVAILABLE(ALL_PLAYERS,LAIR,1,1)
    ROOM_AVAILABLE(ALL_PLAYERS,GARDEN,1,1)
    ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,1,1)
    ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,1,1)
    ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,1,0)
    ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,1,0)

REM magic

    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,1,1)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,1,0)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,0)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,1,0)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
    MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,1,0)

REM Level logic

    QUICK_OBJECTIVE(1, "欢迎，守护者，来到这片幽暗的水湖。这里没有财富、战利品或奖励，你来这里只是为了自娱自乐。这个被黑暗笼罩的王国一次又一次地出现和消失……当它再次消失，末日审判来临的时候，你会取得胜利吗？", PLAYER0)

    SET_TIMER(PLAYER0, TIMER0)
    DISPLAY_COUNTDOWN(PLAYER0, TIMER0, 24000, 1)


REM Dig up the right side

    IF (PLAYER0, TIMER0 >= 10000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 1, 2)
    ENDIF

    IF (PLAYER0, TIMER0 >= 10500)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 2, 3)
    ENDIF

    IF (PLAYER0, TIMER0 >= 11000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 2, 3)
    ENDIF

    IF (PLAYER0, TIMER0 >= 11000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 3, 4)
    ENDIF

    IF (PLAYER0, TIMER0 >= 11500)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 4, 5)
    ENDIF

REM Boost the opponent's level

    IF (PLAYER0, TIMER0 >= 12000)
        USE_SPECIAL_INCREASE_LEVEL(PLAYER3, 1)
    ENDIF

REM Dig up the left side

    IF (PLAYER0, TIMER0 >= 15000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 6, 7)
    ENDIF

    IF (PLAYER0, TIMER0 >= 15500)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 7, 8)
    ENDIF

    IF (PLAYER0, TIMER0 >= 16000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 8, 9)
    ENDIF

    IF (PLAYER0, TIMER0 >= 16500)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 9, 10)
    ENDIF

    IF (PLAYER0, TIMER0 >= 17000)
        COMPUTER_DIG_TO_LOCATION(PLAYER3, 10, 11)
    ENDIF

REM Second Boost
    IF (PLAYER0, TIMER0 >= 17500)
        USE_SPECIAL_INCREASE_LEVEL(PLAYER3, 1)
    ENDIF

REM Endgame

    IF (PLAYER0, TIMER0 >= 24000)
        USE_POWER(PLAYER0, POWER_ARMAGEDDON, 1)
        QUICK_OBJECTIVE(2, "现在你能做的不多了。希望你做好准备。", PLAYER0)
    ENDIF

REM Player wins at the end if the opponent has no monsters left

    IF (PLAYER0, TIMER0 > 24500)

        IF_CONTROLS(PLAYER3, TOTAL_CREATURES == 0)
            SET_HEART_HEALTH(PLAYER3, 0)
        ENDIF

    ENDIF

    IF (PLAYER3, DUNGEON_DESTROYED == 1)
        WIN_GAME
        QUICK_OBJECTIVE(3, "干得好，守护者。新月的王国现在属于你了。")
    ENDIF

REM Illuminated bugs

    IF (PLAYER0, BUG > 0)
        SET_FLAG(PLAYER0, FLAG0, 1)
    ENDIF

    IF (PLAYER0, FLY > 0)
        SET_FLAG(PLAYER0, FLAG0, 1)
    ENDIF

    IF (PLAYER0, FLAG0 > 0)
        QUICK_INFORMATION(4, "这个王国中的甲虫和苍蝇是一种特殊的稀有物种，它们有着闪亮的甲壳。它们会折射月光并照亮周围的环境。")
    ENDIF
