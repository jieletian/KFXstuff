REM Level 5 Bens campaign

LEVEL_VERSION(1)

SET_GENERATE_SPEED(400)

START_MONEY(ALL_PLAYERS,2500)

MAX_CREATURES(ALL_PLAYERS,20)

ADD_CREATURE_TO_POOL(SPIDER,4)
ADD_CREATURE_TO_POOL(BUG,2)
ADD_CREATURE_TO_POOL(TROLL,4)
ADD_CREATURE_TO_POOL(ORC,4)
ADD_CREATURE_TO_POOL(BILE_DEMON,3)
ADD_CREATURE_TO_POOL(FIREFLY,2)
ADD_CREATURE_TO_POOL(TENTACLE,2)
ADD_CREATURE_TO_POOL(HELL_HOUND,2)

CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,1,0)
CREATURE_AVAILABLE(PLAYER0,FIREFLY,1,0)	
CREATURE_AVAILABLE(PLAYER0,BUG,1,0)	

ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,LAIR,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,GARDEN,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,WORKSHOP,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,PRISON,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,TORTURE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,BARRACKS,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,GRAVEYARD,1,0)

MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SIGHT,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_OBEY,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_SIGHT,1,0)

TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,WORD_OF_POWER,1,0)

SET_CREATURE_INSTANCE(THIEF,4,NULL,1)
SET_CREATURE_INSTANCE(THIEF,7,INVISIBILITY,1)
SET_CREATURE_PROPERTY(HORNY,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(AVATAR,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(ANGEL,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(GUARD,NO_IMPRISONMENT,1)
SET_GAME_RULE(ImpWorkExperience,254)

DOOR_AVAILABLE(ALL_PLAYERS,BRACED,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,MAGIC,1,0)

QUICK_OBJECTIVE(1,"该死！看来国王亚瑟已经复活了。你可以看到泰瑞尔的兄弟在他的城堡里闲庭信步。与此同时，善良的巫师们给泰瑞尔施了魔法。他的力量变得虚弱。征服这个王国的目标是杀死国王和泰瑞尔的兄弟。",	ALL_PLAYERS)
QUICK_INFORMATION(2, "这个王国只有一个隐藏的入口，请小心谨慎地寻找。", ALL_PLAYERS)

REVEAL_MAP_LOCATION(PLAYER0,14,20)
REVEAL_MAP_LOCATION(PLAYER0,15,20)

SET_TIMER(PLAYER3,TIMER3)

IF(PLAYER3,TIMER3 > 150)
	PLAY_MESSAGE(PLAYER0,SPEECH,"strengthisgone.mp3")
ENDIF

if(player0, SPECIALKNIGHT == 0)
	if(player0, TYRAEL == 0)
		PLAY_MESSAGE(PLAYER0,SPEECH,"argh.mp3")
		lose_game
	ENDIF
ENDIF

IF(PLAYER0,TRAINING >= 1)
	PLAY_MESSAGE(PLAYER0,SPEECH,"training.mp3")
ENDIF

if(player0, TYRAEL == 1)
	PLAY_MESSAGE(PLAYER0,SPEECH,"look.mp3")
ENDIF

if(player0, FIREFLY == 1)
		ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,3,500)
ENDIF

if(player0, RESEARCH >= 1)
		ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,3,500)
ENDIF

IF_ACTION_POINT(1,PLAYER0)
	ADD_CREATURE_TO_LEVEL(PLAYER1,DARK_KNIGHT,10,1,10,1000)
	ADD_CREATURE_TO_LEVEL(PLAYER1,DARK_KNIGHT,11,1,10,1000)
	SET_OBJECT_CONFIGURATION(DARK_KNIGHT_STATUE,MaximumSize,0)
	SET_TIMER(PLAYER1,TIMER1)
	CHANGE_CREATURE_OWNER(PLAYER1,DARK_KNIGHT,ANYWHERE,PLAYER_GOOD)
	CHANGE_CREATURE_OWNER(PLAYER1,DARK_KNIGHT,ANYWHERE,PLAYER_GOOD)
	QUICK_OBJECTIVE(4,"圣者会释放力量，如果被招降的英雄离他太近，他就会把他们重新变回自己的阵营。杀死他或他的心脏即可阻止这种情况。",	ALL_PLAYERS)
ENDIF


SET_FLAG(PLAYER2,FLAG1,0)

IF_ACTION_POINT(17,PLAYER0)
	PLAY_MESSAGE(PLAYER0,SPEECH,"silly031.mp3")
ENDIF

IF_ACTION_POINT(12,PLAYER0)
SET_FLAG(PLAYER2,FLAG1,1)
ENDIF

IF_ACTION_POINT(16,PLAYER0)
	PLAY_MESSAGE(PLAYER0,SPEECH,"misc009.mp3")
	ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,3,500)
ENDIF

IF_ACTION_POINT(13,PLAYER0)
SET_FLAG(PLAYER2,FLAG1,1)
ENDIF

IF(PLAYER2,FLAG1 ==1)
	QUICK_OBJECTIVE(5,"泰瑞尔的兄弟正准备杀掉你，小心。",	ALL_PLAYERS)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe06.mp3")
	SET_TIMER(PLAYER3,TIMER1)
ENDIF

IF(PLAYER3,TIMER1 > 1000)
	SET_DOOR(UNLOCKED,72,49)
	SET_DOOR(UNLOCKED,71,55)
	SET_DOOR(UNLOCKED,72,60)
ENDIF

IF(PLAYER3,TIMER1 > 3500)
	SET_DOOR(UNLOCKED,71,65)
	SET_DOOR(UNLOCKED,72,71)
ENDIF

if(player_good, AVATAR == 5)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe07.mp3")
ENDIF

if(player_good, AVATAR == 4)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe08.mp3")
ENDIF

SET_FLAG(PLAYER1,FLAG1,1)

IF(PLAYER1,TIMER1 > 150)
	IF(PLAYER1,FLAG1 ==1)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,FAIRY,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ARCHER,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WIZARD,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WITCH,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,MONK,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,THIEF,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,KNIGHT,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,BARBARIAN,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ELF,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,GIANT,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,SAMURAI,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,TIME_MAGE,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,DARK_MISTRESS,AT_ACTION_POINT[2],PLAYER_GOOD)
	ENDIF
ENDIF

IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,3)
ENDIF
IF(PLAYER1,TIMER1 == 60)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,4)
ENDIF
IF(PLAYER1,TIMER1 == 40)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,5)
ENDIF
IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,6)
ENDIF
IF(PLAYER1,TIMER1 == 100)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,7)
ENDIF
IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,8)
ENDIF
IF(PLAYER1,TIMER1 == 120)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,9)
ENDIF

IF(PLAYER1,TIMER1 == 120)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,18)
ENDIF

IF(PLAYER1,TIMER1 == 80)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,19)
ENDIF

IF(PLAYER1,TIMER1 == 20)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,20)
ENDIF

IF(PLAYER1,TIMER1 > 160)
	IF(PLAYER1,FLAG1 ==1)
		NEXT_COMMAND_REUSABLE
		SET_TIMER(PLAYER1,TIMER1)
	ENDIF
ENDIF

IF(PLAYER0,SKELETON > 2)
NEXT_COMMAND_REUSABLE
SET_GAME_RULE(PrisonSkeletonChance,0)
ENDIF

IF(PLAYER0,SKELETON <2)
NEXT_COMMAND_REUSABLE
SET_GAME_RULE(PrisonSkeletonChance,100)
ENDIF

if(player_good, AVATAR == 0)
	SET_FLAG(PLAYER1,FLAG1,2)
ENDIF

IF(PLAYER_GOOD,DUNGEON_DESTROYED == 1)
	SET_FLAG(PLAYER1,FLAG1,2)
ENDIF

if(player_good, GUARD == 0)
	if(player_good, AVATAR == 0)
		IF(PLAYER_GOOD,DUNGEON_DESTROYED == 1)
			QUICK_OBJECTIVE(6,"干得漂亮。各地的人类已经灭绝了。我喜欢。",ALL_PLAYERS)
			win_game
		ENDIF
	ENDIF
endif