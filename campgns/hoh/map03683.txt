LEVEL_VERSION(1)

SET_GENERATE_SPEED(50)

MAX_CREATURES(PLAYER1,20)
MAX_CREATURES(PLAYER3,20)
MAX_CREATURES(PLAYER0,28)

START_MONEY(PLAYER0,150000)
START_MONEY(PLAYER1,28000)
START_MONEY(PLAYER3,28000)

COMPUTER_PLAYER(PLAYER3,0)
COMPUTER_PLAYER(PLAYER1,0)


ALLY_PLAYERS(PLAYER_GOOD,PLAYER3,1)
ALLY_PLAYERS(PLAYER1,PLAYER3,1)
ALLY_PLAYERS(PLAYER_GOOD,PLAYER1,1)

ADD_CREATURE_TO_POOL(WIZARD,20)
ADD_CREATURE_TO_POOL(BARBARIAN,20)
ADD_CREATURE_TO_POOL(ARCHER,24)
ADD_CREATURE_TO_POOL(MONK,40)
ADD_CREATURE_TO_POOL(DWARFA,20)
ADD_CREATURE_TO_POOL(KNIGHT,4)
ADD_CREATURE_TO_POOL(AVATAR,4)
ADD_CREATURE_TO_POOL(TUNNELLER,20)
ADD_CREATURE_TO_POOL(WITCH,20)
ADD_CREATURE_TO_POOL(GIANT,60)
ADD_CREATURE_TO_POOL(FAIRY,20)
ADD_CREATURE_TO_POOL(THIEF,20)
ADD_CREATURE_TO_POOL(SAMURAI,40)
ADD_CREATURE_TO_POOL(IMP,20)
ADD_CREATURE_TO_POOL(HORNY,12)
ADD_CREATURE_TO_POOL(SKELETON,40)
ADD_CREATURE_TO_POOL(TROLL,50)
ADD_CREATURE_TO_POOL(DRAGON,50)
ADD_CREATURE_TO_POOL(DEMONSPAWN,20)
ADD_CREATURE_TO_POOL(FLY,60)
ADD_CREATURE_TO_POOL(DARK_MISTRESS,20)
ADD_CREATURE_TO_POOL(SORCEROR,20)
ADD_CREATURE_TO_POOL(BILE_DEMON,60)
ADD_CREATURE_TO_POOL(BUG,60)
ADD_CREATURE_TO_POOL(VAMPIRE,20)
ADD_CREATURE_TO_POOL(SPIDER,60)
ADD_CREATURE_TO_POOL(HELL_HOUND,20)
ADD_CREATURE_TO_POOL(GHOST,20)
ADD_CREATURE_TO_POOL(TENTACLE,60)
ADD_CREATURE_TO_POOL(ORC,60)

CREATURE_AVAILABLE(ALL_PLAYERS,WIZARD,1,0)
CREATURE_AVAILABLE(PLAYER3,BARBARIAN,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ARCHER,1,0)
CREATURE_AVAILABLE(PLAYER3,MONK,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DWARFA,0,0)
CREATURE_AVAILABLE(PLAYER1,KNIGHT,1,0)
CREATURE_AVAILABLE(PLAYER3,AVATAR,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,TUNNELLER,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,WITCH,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GIANT,1,0)
CREATURE_AVAILABLE(PLAYER3,FAIRY,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,THIEF,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SAMURAI,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,IMP,0,0)
CREATURE_AVAILABLE(PLAYER0,HORNY,1,4)
CREATURE_AVAILABLE(ALL_PLAYERS,SKELETON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DRAGON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DEMONSPAWN,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,FLY,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DARK_MISTRESS,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SORCEROR,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BUG,0,0)
CREATURE_AVAILABLE(PLAYER1,VAMPIRE,1,2)
CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GHOST,0,0)
CREATURE_AVAILABLE(PLAYER0,TENTACLE,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,1,0)


ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,0,0)
ROOM_AVAILABLE(PLAYER0,TREASURE,1,1)
ROOM_AVAILABLE(PLAYER1,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER2,TREASURE,1,1)
ROOM_AVAILABLE(PLAYER3,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER0,RESEARCH,0,0)
ROOM_AVAILABLE(PLAYER1,RESEARCH,0,0)
ROOM_AVAILABLE(PLAYER2,RESEARCH,0,0)
ROOM_AVAILABLE(PLAYER3,RESEARCH,0,0)
ROOM_AVAILABLE(PLAYER0,WORKSHOP,0,0)
ROOM_AVAILABLE(PLAYER1,WORKSHOP,0,0)
ROOM_AVAILABLE(PLAYER2,WORKSHOP,0,0)
ROOM_AVAILABLE(PLAYER3,WORKSHOP,0,0)
ROOM_AVAILABLE(PLAYER3,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER3,LAIR,1,1)
ROOM_AVAILABLE(PLAYER2,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER2,LAIR,1,1)
ROOM_AVAILABLE(PLAYER0,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER0,LAIR,1,1)
ROOM_AVAILABLE(PLAYER1,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER1,LAIR,1,1)
ROOM_AVAILABLE(PLAYER0,GRAVEYARD,0,0)
ROOM_AVAILABLE(PLAYER1,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER2,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER3,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER0,PRISON,0,0)
ROOM_AVAILABLE(PLAYER1,PRISON,1,0)
ROOM_AVAILABLE(PLAYER2,PRISON,0,0)
ROOM_AVAILABLE(PLAYER3,PRISON,1,0)
ROOM_AVAILABLE(PLAYER0,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER1,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER2,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER3,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER0,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER1,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER2,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER3,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER1,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER2,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER3,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER1,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER2,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER3,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER1,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER2,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER3,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER0,BRIDGE,0,0)
ROOM_AVAILABLE(PLAYER2,BRIDGE,0,0)
ROOM_AVAILABLE(PLAYER1,BRIDGE,0,0)
ROOM_AVAILABLE(PLAYER3,BRIDGE,0,0)

MAGIC_AVAILABLE(PLAYER0,POWER_POSSESS,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(PLAYER0,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER1,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER2,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER3,POWER_IMP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)

MAGIC_AVAILABLE(PLAYER0,POWER_SIGHT,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_SIGHT,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(PLAYER2,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_CAVE_IN,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_CAVE_IN,1,0)
MAGIC_AVAILABLE(PLAYER3,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HOLD_AUDIENCE,1,0)
MAGIC_AVAILABLE(PLAYER1,POWER_CHICKEN,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,0,0)
MAGIC_AVAILABLE(PLAYER3,POWER_LIGHTNING,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,1,0)
MAGIC_AVAILABLE(PLAYER2,POWER_DESTROY_WALLS,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_DISEASE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_ARMAGEDDON,0,0)

DOOR_AVAILABLE(ALL_PLAYERS,WOOD,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,ALARM,0,0)
DOOR_AVAILABLE(ALL_PLAYERS,BRACED,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,0,0)
TRAP_AVAILABLE(PLAYER1,LAVA,0,0)
TRAP_AVAILABLE(PLAYER2,LAVA,0,0)
TRAP_AVAILABLE(PLAYER3,LAVA,0,0)
TRAP_AVAILABLE(PLAYER0,LAVA,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,BOULDER,0,0)
DOOR_AVAILABLE(PLAYER0,MAGIC,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,LIGHTNING,0,0)
TRAP_AVAILABLE(PLAYER0,WORD_OF_POWER,0,0)

CREATE_PARTY(HEAD)
ADD_TO_PARTY(HEAD,AVATAR,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,HORNY,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,KNIGHT,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,SAMURAI,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,DRAGON,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,WIZARD,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(HEAD,BARBARIAN,10,0,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(EVILS)
ADD_TO_PARTY(EVILS,HORNY,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(EVILS,VAMPIRE,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(EVILS,BILE_DEMON,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(EVILS,DRAGON,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(EVILS,SORCEROR,10,0,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(GOODS)
ADD_TO_PARTY(GOODS,AVATAR,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(GOODS,KNIGHT,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(GOODS,SAMURAI,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(GOODS,WIZARD,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(GOODS,BARBARIAN,10,0,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(MIXED)
ADD_TO_PARTY(MIXED,AVATAR,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,HORNY,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,KNIGHT,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,VAMPIRE,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,SAMURAI,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,DRAGON,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(MIXED,BILE_DEMON,10,0,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(INSECTS)
ADD_TO_PARTY(INSECTS,BUG,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,SPIDER,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,FLY,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,FLY,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,BUG,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,BUG,10,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(INSECTS,BUG,10,0,ATTACK_DUNGEON_HEART,0)

IF(PLAYER0,GAME_TURN >= 10)
QUICK_INFORMATION(1,"欢迎来到奥拉维城堡，守护者！",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 700)
QUICK_OBJECTIVE(2,"哈尔控制着这座城堡，在这个王国里有两个守护者。不用多说，除了你受到限制，即使你很强大。先别去南方，否则你会被烤焦的！",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 1200)
QUICK_INFORMATION(3,"冷静，这将是你遇到的最困难的事情。有什么秘密吗？",PLAYER0)
ENDIF

IF_ACTION_POINT(1,PLAYER0)
QUICK_OBJECTIVE(4,"熔岩就在这里。有什么办法吗，守护者？",1)
ENDIF

IF(PLAYER0,ENTRANCE == 36)
IF(PLAYER_GOOD,TOTAL_AREA <= 200)
MAX_CREATURES(PLAYER0,70)
QUICK_OBJECTIVE(5,"好在你的入口已经开始积聚更多的怪物！干掉哈尔！",PLAYER0)
CREATURE_AVAILABLE(PLAYER0,SORCEROR,1,0)
CREATURE_AVAILABLE(PLAYER0,BILE_DEMON,1,0)
CREATURE_AVAILABLE(PLAYER0,WIZARD,1,0)
ENDIF
ENDIF

IF(PLAYER0,WORKSHOP == 50)
QUICK_OBJECTIVE(6,"非常好，获得工厂将变得非常方便，但还缺少一些东西...",PLAYER0)
ROOM_AVAILABLE(PLAYER0,BRIDGE,1,0)
ENDIF

IF(PLAYER0,RESEARCH == 35)
ROOM_AVAILABLE(PLAYER0,RESEARCH,1,1)
QUICK_OBJECTIVE(7,"非常好，获得图书馆将变得非常方便，但还缺少一些东西...",PLAYER0)
ENDIF

IF(PLAYER0,WORKSHOP == 50)
IF(PLAYER0,RESEARCH == 35)
QUICK_OBJECTIVE(8,"是时候再找一座好桥了！研究一下。",PLAYER0)
CREATURE_AVAILABLE(PLAYER0,TUNNELLER,1,1)
ENDIF
ENDIF

IF(PLAYER0,BRIDGE >= 2)
ROOM_AVAILABLE(PLAYER0,BRIDGE,1,1)
QUICK_OBJECTIVE(9,"是时候继续前进了... 放聪明点，守护者。",1)
ENDIF

IF(PLAYER_GOOD,TOTAL_AREA <= 0)
IF(PLAYER_GOOD,TOTAL_CREATURES == 0)
IF(PLAYER_GOOD,DUNGEON_DESTROYED==1)
SET_TIMER(PLAYER0,TIMER0)
QUICK_OBJECTIVE(10,"哈尔的所有王国都被占领！你已经征服... 不，等等，你感觉到了什么吗？",PLAYER0)
ENDIF
ENDIF
ENDIF

IF(PLAYER0,TIMER0 >= 1000)
QUICK_OBJECTIVE(11,"这是哈尔的部队... 准备！",PLAYER0)
ENDIF

IF(PLAYER0,TIMER0 >= 2800)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HEAD,-1,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,EVILS,-2,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GOODS,-3,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,MIXED,-4,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-5,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-6,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-7,1)
PLAY_MESSAGE(PLAYER0,SOUND,90)
QUICK_OBJECTIVE(12,"我的天啊！看，守护者！",-1)
ENDIF

IF(PLAYER0,TIMER0 >= 4900)
IF(PLAYER_GOOD,TOTAL_CREATURES == 0)
QUICK_OBJECTIVE(13,"训练你的怪物，守护者！一定还会有更多的进攻！",PLAYER0)
ENDIF
ENDIF

IF(PLAYER0,TIMER0 >= 13000)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-2,3)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-4,3)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,INSECTS,-7,3)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,AVATAR,-1,2,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,AVATAR,-3,2,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,AVATAR,-5,2,10,0)
QUICK_OBJECTIVE(14,"敌人全军出动！情况不妙，非常糟糕！",-1)
ENDIF

IF(PLAYER0,TIMER0 >= 18000)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,KNIGHT,-1,1,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DRAGON,-2,7,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WIZARD,-3,10,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ARCHER,-5,10,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,VAMPIRE,-4,7,7,0)
SET_TIMER(PLAYER0,TIMER1)
ENDIF

IF(PLAYER0,TIMER1 >= 3000)
IF(PLAYER_GOOD,TOTAL_CREATURES == 0)
QUICK_OBJECTIVE(15,"哈尔终于被……不，他还没有被打败， 但这片土地是你的了，奥拉维的城堡是你的了。",PLAYER0)
WIN_GAME
ENDIF
ENDIF


IF(PLAYER0,IMP > 14)
QUICK_INFORMATION(16,"我得说，这是哈尔的下流的把戏，它限制了你的小鬼数量上限。",PLAYER0)
NEXT_COMMAND_REUSABLE
KILL_CREATURE(PLAYER0,IMP,LEAST_EXPERIENCED,1)
ENDIF

IF(PLAYER1,RESEARCH == 35)
QUICK_OBJECTIVE(17,"我看你可能已经发现了这个史诗把戏的一些秘密！正如前面所说，有什么秘密吗？我觉得有！",PLAYER0)
ENDIF

IF(PLAYER3,RESEARCH == 35)
QUICK_OBJECTIVE(18,"我看你可能已经发现了这个史诗把戏的一些秘密！"正如前面所说，有什么秘密吗？我觉得有！",PLAYER0)
ENDIF

IF(PLAYER0,PRISON >= 1)
QUICK_OBJECTIVE(19,"您发现了一个超级机密！您的奖励已经送到！",PLAYER0)
ADD_CREATURE_TO_LEVEL(PLAYER0,SKELETON,PLAYER0,8,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,SKELETON,PLAYER0,8,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,SKELETON,PLAYER0,8,10,0)
ENDIF
