LEVEL_VERSION(1)

SET_GENERATE_SPEED(160)

MAX_CREATURES(PLAYER2,20)
MAX_CREATURES(PLAYER1,20)
MAX_CREATURES(PLAYER3,20)
MAX_CREATURES(PLAYER0,22)

START_MONEY(PLAYER0,0)
START_MONEY(PLAYER2,28000)
START_MONEY(PLAYER1,28000)
START_MONEY(PLAYER3,28000)

COMPUTER_PLAYER(PLAYER2,0)
COMPUTER_PLAYER(PLAYER3,0)
COMPUTER_PLAYER(PLAYER1,0)


ALLY_PLAYERS(PLAYER_GOOD,PLAYER2,1)
ALLY_PLAYERS(PLAYER_GOOD,PLAYER3,1)
ALLY_PLAYERS(PLAYER1,PLAYER2,1)
ALLY_PLAYERS(PLAYER1,PLAYER3,1)
ALLY_PLAYERS(PLAYER_GOOD,PLAYER1,1)
ALLY_PLAYERS(PLAYER2,PLAYER3,1)

SET_CREATURE_MAX_LEVEL(PLAYER1,VAMPIRE,6)
SET_CREATURE_MAX_LEVEL(PLAYER3,FAIRY,6)
SET_CREATURE_MAX_LEVEL(PLAYER3,MONK,8)
SET_CREATURE_MAX_LEVEL(PLAYER2,AVATAR,3)
SET_CREATURE_MAX_LEVEL(PLAYER1,KNIGHT,8)

ADD_CREATURE_TO_POOL(WIZARD,20)
ADD_CREATURE_TO_POOL(BARBARIAN,20)
ADD_CREATURE_TO_POOL(ARCHER,24)
ADD_CREATURE_TO_POOL(MONK,40)
ADD_CREATURE_TO_POOL(DWARFA,20)
ADD_CREATURE_TO_POOL(KNIGHT,4)
ADD_CREATURE_TO_POOL(AVATAR,4)
ADD_CREATURE_TO_POOL(TUNNELLER,20)
ADD_CREATURE_TO_POOL(WITCH,20)
ADD_CREATURE_TO_POOL(GIANT,60)
ADD_CREATURE_TO_POOL(FAIRY,20)
ADD_CREATURE_TO_POOL(THIEF,20)
ADD_CREATURE_TO_POOL(SAMURAI,40)
ADD_CREATURE_TO_POOL(IMP,20)
ADD_CREATURE_TO_POOL(HORNY,4)
ADD_CREATURE_TO_POOL(SKELETON,40)
ADD_CREATURE_TO_POOL(TROLL,50)
ADD_CREATURE_TO_POOL(DRAGON,20)
ADD_CREATURE_TO_POOL(DEMONSPAWN,20)
ADD_CREATURE_TO_POOL(FLY,60)
ADD_CREATURE_TO_POOL(DARK_MISTRESS,20)
ADD_CREATURE_TO_POOL(SORCEROR,20)
ADD_CREATURE_TO_POOL(BILE_DEMON,60)
ADD_CREATURE_TO_POOL(BUG,60)
ADD_CREATURE_TO_POOL(VAMPIRE,20)
ADD_CREATURE_TO_POOL(SPIDER,60)
ADD_CREATURE_TO_POOL(HELL_HOUND,20)
ADD_CREATURE_TO_POOL(GHOST,20)
ADD_CREATURE_TO_POOL(TENTACLE,60)
ADD_CREATURE_TO_POOL(ORC,60)

CREATURE_AVAILABLE(ALL_PLAYERS,WIZARD,1,0)
CREATURE_AVAILABLE(PLAYER3,BARBARIAN,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ARCHER,1,0)
CREATURE_AVAILABLE(PLAYER3,MONK,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DWARFA,0,0)
CREATURE_AVAILABLE(PLAYER3,KNIGHT,1,4)
CREATURE_AVAILABLE(PLAYER2,AVATAR,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,TUNNELLER,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,WITCH,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GIANT,1,0)
CREATURE_AVAILABLE(PLAYER3,FAIRY,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,THIEF,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SAMURAI,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,IMP,0,0)
CREATURE_AVAILABLE(PLAYER0,HORNY,1,4)
CREATURE_AVAILABLE(ALL_PLAYERS,SKELETON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DRAGON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DEMONSPAWN,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,FLY,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DARK_MISTRESS,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SORCEROR,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BUG,0,0)
CREATURE_AVAILABLE(PLAYER1,VAMPIRE,1,10)
CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GHOST,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,1,0)

ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,0,0)
ROOM_AVAILABLE(PLAYER0,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER1,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER2,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER3,TREASURE,0,0)
ROOM_AVAILABLE(PLAYER0,RESEARCH,0,0)
ROOM_AVAILABLE(PLAYER1,RESEARCH,1,1)
ROOM_AVAILABLE(PLAYER2,RESEARCH,1,1)
ROOM_AVAILABLE(PLAYER3,RESEARCH,1,1)
ROOM_AVAILABLE(PLAYER0,WORKSHOP,0,0)
ROOM_AVAILABLE(PLAYER1,WORKSHOP,1,0)
ROOM_AVAILABLE(PLAYER2,WORKSHOP,1,0)
ROOM_AVAILABLE(PLAYER3,WORKSHOP,1,0)
ROOM_AVAILABLE(PLAYER3,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER3,LAIR,1,1)
ROOM_AVAILABLE(PLAYER2,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER2,LAIR,1,1)
ROOM_AVAILABLE(PLAYER0,GARDEN,0,0)
ROOM_AVAILABLE(PLAYER0,LAIR,0,0)
ROOM_AVAILABLE(PLAYER1,GARDEN,1,1)
ROOM_AVAILABLE(PLAYER1,LAIR,1,1)
ROOM_AVAILABLE(PLAYER0,GRAVEYARD,0,0)
ROOM_AVAILABLE(PLAYER1,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER2,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER3,GRAVEYARD,1,1)
ROOM_AVAILABLE(PLAYER0,PRISON,0,0)
ROOM_AVAILABLE(PLAYER1,PRISON,1,0)
ROOM_AVAILABLE(PLAYER2,PRISON,1,0)
ROOM_AVAILABLE(PLAYER3,PRISON,1,0)
ROOM_AVAILABLE(PLAYER0,TORTURE,0,0)
ROOM_AVAILABLE(PLAYER1,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER2,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER3,TORTURE,1,0)
ROOM_AVAILABLE(PLAYER0,TRAINING,0,0)
ROOM_AVAILABLE(PLAYER1,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER2,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER3,TRAINING,1,1)
ROOM_AVAILABLE(PLAYER1,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER2,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER3,SCAVENGER,1,1)
ROOM_AVAILABLE(PLAYER1,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER2,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER3,BARRACKS,1,1)
ROOM_AVAILABLE(PLAYER1,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER2,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER3,TEMPLE,0,0)
ROOM_AVAILABLE(PLAYER0,BRIDGE,0,0)
ROOM_AVAILABLE(PLAYER2,BRIDGE,1,0)
ROOM_AVAILABLE(PLAYER1,BRIDGE,1,0)
ROOM_AVAILABLE(PLAYER3,BRIDGE,1,0)

MAGIC_AVAILABLE(PLAYER0,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(PLAYER2,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(PLAYER0,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER1,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER2,POWER_IMP,1,1)
MAGIC_AVAILABLE(PLAYER3,POWER_IMP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)

MAGIC_AVAILABLE(PLAYER0,POWER_SIGHT,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_SIGHT,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(PLAYER2,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_CAVE_IN,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_CAVE_IN,1,0)
MAGIC_AVAILABLE(PLAYER3,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HOLD_AUDIENCE,1,0)
MAGIC_AVAILABLE(PLAYER1,POWER_CHICKEN,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,0,0)
MAGIC_AVAILABLE(PLAYER3,POWER_LIGHTNING,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,1,0)
MAGIC_AVAILABLE(PLAYER2,POWER_DESTROY_WALLS,0,0)
MAGIC_AVAILABLE(PLAYER2,POWER_DISEASE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_ARMAGEDDON,0,0)

DOOR_AVAILABLE(ALL_PLAYERS,WOOD,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,ALARM,0,0)
DOOR_AVAILABLE(ALL_PLAYERS,BRACED,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,0,0)
TRAP_AVAILABLE(PLAYER1,LAVA,1,0)
TRAP_AVAILABLE(PLAYER2,LAVA,1,0)
TRAP_AVAILABLE(PLAYER3,LAVA,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,BOULDER,0,0)
DOOR_AVAILABLE(PLAYER0,MAGIC,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,LIGHTNING,1,0)
TRAP_AVAILABLE(PLAYER0,WORD_OF_POWER,0,10)

CREATE_PARTY(ONE)
ADD_TO_PARTY(ONE,KNIGHT,1,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(ONE,THIEF,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(ONE,ARCHER,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(ONE,HORNY,1,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(ONE,HORNY,1,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(ONE,HORNY,1,10000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(TWO)
ADD_TO_PARTY(TWO,KNIGHT,3,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TWO,THIEF,5,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TWO,ARCHER,6,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TWO,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TWO,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TWO,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(THREE)
ADD_TO_PARTY(THREE,KNIGHT,9,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(THREE,THIEF,10,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(THREE,ARCHER,9,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(THREE,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(THREE,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(THREE,HORNY,2,10000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(SINGLE)
ADD_TO_PARTY(SINGLE,ARCHER,9,1000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(DOUBLE)
ADD_TO_PARTY(DOUBLE,BARBARIAN,9,2000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DOUBLE,GIANT,9,2000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(TRIPLE)
ADD_TO_PARTY(TRIPLE,WITCH,9,4000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TRIPLE,BILE_DEMON,9,4000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(TRIPLE,GHOST,9,4000,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(QUAD)
ADD_TO_PARTY(QUAD,SAMURAI,9,8000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(QUAD,ORC,9,8000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(QUAD,DARK_MISTRESS,9,8000,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(QUAD,SKELETON,9,8000,ATTACK_DUNGEON_HEART,0)

IF(PLAYER0,GAME_TURN >= 500)
IF_CONTROLS(PLAYER0,DEMONSPAWN >= 1)
QUICK_INFORMATION(1,"您已经解开了上一界的神秘提示。您将获得一只吸血鬼！当您的生物数量达到上限时，您就可以获得它！",PLAYER0)
ENDIF
ENDIF

IF(PLAYER0,GAME_TURN >= 10)
QUICK_OBJECTIVE(2,"你征服奥拉维城堡的进程将被阻止......另外三个未知的守护者和哈尔在边境。你甚至没有受到什么限制。打败你的敌人，",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 1000)
QUICK_INFORMATION(3,"你明白吗？你有麻烦了。除非... 检查你的魔法！",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 3000)
QUICK_INFORMATION(4,"守护者！有传言说，哈尔真的复活了被你摧毁的守护者！",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 3400)
QUICK_OBJECTIVE(5,"是真的，守护者。这是来自莫克兰王国的守护者蓝花！",PLAYER1)
ENDIF

IF(PLAYER0,GAME_TURN >= 3700)
QUICK_OBJECTIVE(6,"古普兹-瑟潘斯坦西佩姆策哈巴希特尔的泽欧尼姆也来了！",PLAYER2)
ENDIF

IF(PLAYER0,GAME_TURN >= 4000)
QUICK_OBJECTIVE(7,"守护者马蒂... 至少你还能重演你的复仇！",PLAYER3)
ENDIF

IF(PLAYER0,GAME_TURN >= 4400)
QUICK_OBJECTIVE(8,"打败那些白痴，你知道怎么做 你所有的对手守护者可能还没有增强所有的力量......",-1)
ENDIF

IF(PLAYER0,TOTAL_CREATURES >= 22)
IF_CONTROLS(PLAYER0,DEMONSPAWN >= 1)
ADD_CREATURE_TO_LEVEL(PLAYER0,VAMPIRE,PLAYER0,1,10,0)
QUICK_INFORMATION(9,"你的奖品送到了，守护者！",PLAYER0)
ENDIF
ENDIF

IF(PLAYER0,GAME_TURN >= 6000)
QUICK_OBJECTIVE(10,"他们来了！",-1)
ADD_TUNNELLER_PARTY_TO_LEVEL(PLAYER_GOOD,ONE,-1,DUNGEON_HEART,0,2,2000)
ENDIF

IF(PLAYER_GOOD,BATTLES_LOST > 6)
IF(PLAYER0,GAME_TURN <= 14000)
QUICK_OBJECTIVE(11,"哈尔甚至都没有使出全力.. 但奇怪的感觉有点......安全。有些事情正在发生。",PLAYER0)
SET_TIMER(PLAYER0,TIMER0)
ENDIF
ENDIF

IF(PLAYER0,TIMER0 >= 4800)
IF(PLAYER1,DUNGEON_DESTROYED==0)
	NEXT_COMMAND_REUSABLE
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SINGLE,-1,1)
	

	NEXT_COMMAND_REUSABLE
	SET_TIMER(PLAYER0,TIMER0)

ENDIF
ENDIF

IF(PLAYER_GOOD,BATTLES_LOST >= 13)
SET_TIMER(PLAYER0,TIMER1)
ENDIF

IF(PLAYER0,TIMER1 >= 11200)
IF(PLAYER2,DUNGEON_DESTROYED==0)
	NEXT_COMMAND_REUSABLE
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,DOUBLE,-1,1)
	

	NEXT_COMMAND_REUSABLE
	SET_TIMER(PLAYER0,TIMER1)

ENDIF
ENDIF

IF(PLAYER0,GAME_TURN >= 14000)
QUICK_OBJECTIVE(12,"是啊... 这才像话！",-1)
ADD_TUNNELLER_PARTY_TO_LEVEL(PLAYER_GOOD,TWO,-1,DUNGEON_HEART,0,2,2000)
SET_TIMER(PLAYER0,TIMER2)
ENDIF

IF(PLAYER0,TIMER2 >= 18000)
IF(PLAYER3,DUNGEON_DESTROYED==0)
	NEXT_COMMAND_REUSABLE
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,TRIPLE,-1,1)
	

	NEXT_COMMAND_REUSABLE
	SET_TIMER(PLAYER0,TIMER2)

ENDIF
ENDIF

IF(PLAYER0,BATTLES_WON >= 70)
SET_TIMER(PLAYER0,TIMER3)
ENDIF

IF(PLAYER0,TIMER3 >= 32000)
IF(ALL_DUNGEONS_DESTROYED==0)
	NEXT_COMMAND_REUSABLE
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,QUAD,-1,1)
	

	NEXT_COMMAND_REUSABLE
	SET_TIMER(PLAYER0,TIMER3)

ENDIF
ENDIF

IF(PLAYER0,GAME_TURN >= 22000)
QUICK_OBJECTIVE(13,"你被诅咒了！",-1)
ADD_TUNNELLER_PARTY_TO_LEVEL(PLAYER_GOOD,THREE,-1,DUNGEON_HEART,0,10,2000)
ENDIF

IF(PLAYER1,DUNGEON_DESTROYED==1)
QUICK_OBJECTIVE(14,"蓝花被击败了！",-1)
ENDIF

IF(PLAYER2,DUNGEON_DESTROYED==1)
QUICK_OBJECTIVE(15,"泽欧尼姆被击败了！",-1)
ENDIF

IF(PLAYER3,DUNGEON_DESTROYED==1)
QUICK_OBJECTIVE(16,"马蒂被击败了！",-1)
ENDIF

IF(PLAYER1,DUNGEON_DESTROYED==1)
IF(PLAYER2,DUNGEON_DESTROYED==1)
IF(PLAYER3,DUNGEON_DESTROYED==1)
QUICK_OBJECTIVE(17,"所有敌人都被打败了，但最后的决战即将到来！",-1)
SET_TIMER(PLAYER0,TIMER4)
ENDIF
ENDIF
ENDIF


IF(PLAYER0,TIMER4 >= 3000)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ONE,-1,2)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,TWO,-1,2)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,THREE,-1,2)
ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,AVATAR,-1,1,10,0)
QUICK_OBJECTIVE(18,"我的天啊！聪明点！",-1)
ENDIF


IF(PLAYER0,TIMER4 >= 4000)
IF(PLAYER_GOOD,TOTAL_CREATURES == 0)
QUICK_OBJECTIVE(19,"我要为你的成功鼓掌！干得漂亮！",PLAYER0)
WIN_GAME
ENDIF
ENDIF