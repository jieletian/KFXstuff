LEVEL_VERSION(1)

SET_GENERATE_SPEED(350)

START_MONEY(PLAYER0,20000)

MAX_CREATURES(PLAYER0,1)

SET_CREATURE_MAX_LEVEL(PLAYER_GOOD,AVATAR,5)
SET_CREATURE_MAX_LEVEL(PLAYER_GOOD,WIZARD,8)

DEAD_CREATURES_RETURN_TO_POOL(1)


REM Room availability
ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,LAIR,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,GARDEN,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,WORKSHOP,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,BARRACKS,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,PRISON,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,TORTURE,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,SCAVENGER,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,TEMPLE,0,0)
ROOM_AVAILABLE(ALL_PLAYERS,GRAVEYARD,0,0)

REM Spells availability
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SIGHT,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_OBEY,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_LIGHTNING,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_DISEASE,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CAVE_IN,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CHICKEN,0,0)

CREATE_PARTY(DETECT)
ADD_TO_PARTY(DETECT,AVATAR,1,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DETECT,KNIGHT,1,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DETECT,WIZARD,7,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DETECT,GHOST,7,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DETECT,GHOST,7,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(DETECT,GHOST,7,0,ATTACK_DUNGEON_HEART,0)

CREATE_PARTY(AFTERPARTY)
ADD_TO_PARTY(AFTERPARTY,KNIGHT,7,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SKELETON,6,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SPIDER,5,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SKELETON,4,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SPIDER,3,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SKELETON,2,0,ATTACK_DUNGEON_HEART,0)
ADD_TO_PARTY(AFTERPARTY,SPIDER,1,0,ATTACK_DUNGEON_HEART,0)

IF(PLAYER0,GAME_TURN >= 10)
QUICK_INFORMATION(1,"在开始游戏之前，请仔细阅读信息。",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 150)
QUICK_INFORMATION(2,"在这一王国中，你遇到了哈尔的后备基地之一的，一个类似城堡的大型区域。由于哈尔已经注意到了你的力量，你将不得不使用最有限的力量来对付哈尔，但你有一个计划！",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 450)
QUICK_INFORMATION(3,"你不能失去小鬼，否则就会失败。放聪明点!准备好了吗...",PLAYER0)
ENDIF

IF(PLAYER0,GAME_TURN >= 700)
QUICK_OBJECTIVE(4,"一个大型后备基地，只能使用一个小鬼，只有最低限度的能量可用，但你的想象力将是巨大的！打败哈尔的后备基地。你会感觉到它与你有点格格不入，幸运的是，这样你就可以放心大胆地行动了，但不要使用太多的力量，因为哈尔一定会发现它，你的失败也就水到渠成了！",PLAYER0)
	ROOM_AVAILABLE(PLAYER0,GUARD_POST,1,1)
	MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,1)
	MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,1)
	MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
	
ENDIF


IF(PLAYER0,GAME_TURN >= 1050)
QUICK_INFORMATION(5,"你可能会想，哈尔怎么会发现这么小的力量呢？总之，你可以对你的小鬼使用附身魔法。像个疯子一样控制他，别让他死了！",PLAYER0)
ENDIF

IF(PLAYER0,TOTAL_CREATURES >= 12)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,DETECT,-1,2)
QUICK_INFORMATION(6,"守护者，哈尔发现你了，保持警惕！",PLAYER0)
SET_TIMER(PLAYER0,TIMER0)
ENDIF

IF(PLAYER0,TIMER0 >= 7000)
QUICK_INFORMATION(7,"守护者，快看！",1)
MAGIC_AVAILABLE(PLAYER0,POWER_HAND,1,1)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,DETECT,1,1)
ENDIF

IF(PLAYER0,TIMER0 >= 35000)
ADD_PARTY_TO_LEVEL(PLAYER_GOOD,AFTERPARTY,2,1)
ENDIF


IF(PLAYER0,IMP <= 0)
LOSE_GAME
QUICK_INFORMATION(8,"你唯一的开路者已经死去。你已经失败了！",PLAYER0)
ENDIF

IF(PLAYER_GOOD,DUNGEON_DESTROYED==1)
QUICK_OBJECTIVE(10,"太棒了，守护者。你的技巧和计划是对付哈尔的终极力量，在这种情况下他永远不会明白。干得好！离你的目标又近了一步！",PLAYER0)
WIN_GAME
ENDIF

IF(PLAYER0,RESEARCH >= 9)
ROOM_AVAILABLE(PLAYER0,BRIDGE,1,1)
MAGIC_AVAILABLE(PLAYER0,POWER_HAND,1,1)
QUICK_OBJECTIVE(9,"干得好，守护者！你占领了哈尔的图书馆。由于它的主人只是换了一个人，所以哈尔不会轻易发现不对劲。你还可以使用一些魔法、房间和力量！",PLAYER0)
ENDIF