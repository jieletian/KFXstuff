LEVEL_VERSION(1)

SET_GENERATE_SPEED(650)

QUICK_OBJECTIVE(0,"寂静平原因为是夏日之地中唯一的永久邪恶据点而臭名昭著。所谓的白色部落或简称部落，由吸血鬼之王凯斯勒领导，据说他是现存的第一个吸血鬼。部落最近变得更加好战，因此可能会成为您自己野心的对手。",PLAYER1)

SET_GAME_RULE(PayDayGap,15000)

SET_FLAG(PLAYER1,FLAG0,DRAWFROM(1,2))

ADD_HEART_HEALTH(PLAYER1,-5000,0)

REM Giant from Flameburgh
SET_CREATURE_HEALTH(GIANT,2000)

REMOVE_SACRIFICE_RECIPE(TROLL,BILE_DEMON,DARK_MISTRESS)

START_MONEY(ALL_PLAYERS,0)

MAX_CREATURES(ALL_PLAYERS,12)

ADD_CREATURE_TO_POOL(FLY,10)
ADD_CREATURE_TO_POOL(BUG,10)
ADD_CREATURE_TO_POOL(DEMONSPAWN,20)
ADD_CREATURE_TO_POOL(TROLL,20)
ADD_CREATURE_TO_POOL(SPIDER,10)
ADD_CREATURE_TO_POOL(HELL_HOUND,10)
ADD_CREATURE_TO_POOL(TENTACLE,10)
ADD_CREATURE_TO_POOL(SORCEROR,10)
ADD_CREATURE_TO_POOL(ORC,8)
ADD_CREATURE_TO_POOL(BILE_DEMON,8)
ADD_CREATURE_TO_POOL(DRAGON,8)
ADD_CREATURE_TO_POOL(DARK_MISTRESS,8)

CREATURE_AVAILABLE(ALL_PLAYERS,FLY,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BUG,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DEMONSPAWN,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SORCEROR,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DRAGON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DARK_MISTRESS,1,0)

SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,IMP,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,TROLL,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,FLY,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,BUG,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,DARK_MISTRESS,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,SORCEROR,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,SPIDER,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,TENTACLE,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,ORC,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,HELL_HOUND,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,DRAGON,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,BILE_DEMON,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,SKELETON,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,DRAGON,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,HORNY,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,GHOST,8)

SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,THIEF,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,ARCHER,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,DWARFA,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,FAIRY,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,WIZARD,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,MONK,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,GIANT,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,BARBARIAN,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,WITCH,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,SAMURAI,8)
SET_CREATURE_MAX_LEVEL(ALL_PLAYERS,KNIGHT,8)


ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,LAIR,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,WORKSHOP,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,TORTURE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,BARRACKS,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,TEMPLE,1,0)

MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HOLD_AUDIENCE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CHICKEN,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CAVE_IN,1,0)

TRAP_AVAILABLE(ALL_PLAYERS,ALARM,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,LIGHTNING,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,WORD_OF_POWER,1,0)

DOOR_AVAILABLE(ALL_PLAYERS,WOOD,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,BRACED,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,1,0)

CREATE_PARTY(HORDE1)
	ADD_TO_PARTY(HORDE1,SKELETON,1,0,ATTACK_ROOMS,0)
	ADD_TO_PARTY(HORDE1,SKELETON,2,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE1,SKELETON,1,0,ATTACK_ROOMS,0)
	ADD_TO_PARTY(HORDE1,SKELETON,1,0,DEFEND_LOCATION,0)
	ADD_TO_PARTY(HORDE1,SPIDER,2,0,DEFEND_PARTY,0)

CREATE_PARTY(GHOST_THIEF)
	ADD_TO_PARTY(GHOST_THIEF,GHOST,2,0,STEAL_SPELLS,0)

CREATE_PARTY(GHOST_HEART)
		ADD_TO_PARTY(GHOST_HEART,GHOST,2,0,SNIPE_DUNGEON_HEART,0)

CREATE_PARTY(HORDE2)
	ADD_TO_PARTY(HORDE2,SKELETON,1,0,ATTACK_ROOMS,0)
	ADD_TO_PARTY(HORDE2,SKELETON,2,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE2,SKELETON,1,0,ATTACK_ROOMS,0)
	ADD_TO_PARTY(HORDE2,SKELETON,1,0,DEFEND_LOCATION,0)
	ADD_TO_PARTY(HORDE2,SORCEROR,2,0,DEFEND_PARTY,0)


CREATE_PARTY(HORDE3)
	ADD_TO_PARTY(HORDE3,SKELETON,4,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE3,SKELETON,5,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE3,SKELETON,4,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE3,SKELETON,4,0,DEFEND_LOCATION,0)
	ADD_TO_PARTY(HORDE3,SPIDER,4,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE3,SPIDER,4,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(HORDE3,GHOST,8,0,DEFEND_PARTY,0)

CREATE_PARTY(DARK_SOULS)
	ADD_TO_PARTY(DARK_SOULS,GHOST,6,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(DARK_SOULS,GHOST,6,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(DARK_SOULS,GHOST,8,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(DARK_SOULS,GHOST,8,0,ATTACK_ENEMIES,0)
	ADD_TO_PARTY(DARK_SOULS,GHOST,10,0,ATTACK_ENEMIES,0)

CREATE_PARTY(SKELETON_CAVE)
	ADD_TO_PARTY(SKELETON_CAVE,SKELETON,2,0,DEFEND_LOCATION,50000)
	
CREATE_PARTY(GHOST_CAVE)
	ADD_TO_PARTY(GHOST_CAVE,GHOST,2,0,DEFEND_LOCATION,50000)

CREATE_PARTY(KESSLER)
	ADD_TO_PARTY(KESSLER,VAMPIRE,10,15000,DEFEND_HEART,1000)

CREATE_PARTY(SKELETON_GUARD)
	ADD_TO_PARTY(SKELETON_GUARD,SKELETON,7,0,DEFEND_LOCATION,50000)

CREATE_PARTY(ELITE_SKELETON)
	ADD_TO_PARTY(ELITE_SKELETON,SKELETON,10,0,DEFEND_LOCATION,50000)

CREATE_PARTY(ELITE_SPIDER)
	ADD_TO_PARTY(ELITE_SPIDER,SPIDER,10,0,DEFEND_LOCATION,50000)
	
CREATE_PARTY(WANDERING_VAMPIRE)
	ADD_TO_PARTY(WANDERING_VAMPIRE,VAMPIRE,6,0,DEFEND_LOCATION,50000)

CREATE_PARTY(TEMPLE_VAMPIRE)
	ADD_TO_PARTY(TEMPLE_VAMPIRE,VAMPIRE,8,1000,DEFEND_LOCATION,50000)
	
CREATE_PARTY(ELITE_VAMPIRE)
	ADD_TO_PARTY(ELITE_VAMPIRE,VAMPIRE,10,1500,DEFEND_LOCATION,50000)

IF(PLAYER1,FLAG0 == 1)
	ADD_CREATURE_TO_LEVEL(PLAYER_NEUTRAL,GIANT,11,1,7,1000)
ENDIF

IF(PLAYER1,FLAG0 == 2)
	ADD_CREATURE_TO_LEVEL(PLAYER_NEUTRAL,GIANT,12,1,7,1000)
ENDIF

IF(PLAYER1,GAME_TURN > 1000)
	QUICK_INFORMATION(1,"夏日之地战争状态：随着压力的增大，英雄队伍中开始出现怀疑的声音。",PLAYER1)
ENDIF

IF(PLAYER1,GAME_TURN >= 400)
	QUICK_INFORMATION(2,"在你苏醒于安贝尔加德时，英雄们曾试图驱逐部落，但失败了。接管他们地牢的遗迹并充分利用它，因为这里的资源有限。",PLAYER1)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_CAVE,13,2)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_CAVE,14,3)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_CAVE,13,3)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_CAVE,14,2)
ENDIF

IF_SLAB_OWNER(66,60,PLAYER1)
	QUICK_INFORMATION(3,"守护者，来自这个王国之外的消息。神秘骑士已经赶走了守护者阿斯塔罗斯，从而解除了黎明之城的围攻。守护者阿斯塔罗斯已经撤退到恩伯菲尔德并开始在那里建立防御工事。",PLAYER1)
ENDIF


IF_SLAB_OWNER(52,29,PLAYER1)
	QUICK_INFORMATION(4,"来自外界的更多消息。守护者詹达佐恩和克兰扎拉克似乎正朝着斯普林兰方向冲撞。守护者克罗纽斯被发现在附近的心脏地带，战士之王和他的军队正在紧追不舍。",PLAYER1)
ENDIF

IF(PLAYER1,TOTAL_CREATURES >= 4)
	IF(PLAYER1,TIMES_LEVELUP_CREATURE >= 6)
		SET_TIMER(PLAYER_GOOD,TIMER0)
		ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE1,-2,1)
		QUICK_OBJECTIVE(5,"部落已经知道你已抵达寂静平原，并正在向你发起进攻。准备好你的仆从，迎接战斗吧！",PLAYER1)
	ENDIF
ENDIF

IF(PLAYER1,TOTAL_CREATURES >= 10)
	IF(PLAYER1,TIMES_LEVELUP_CREATURE >= 16)
		SET_TIMER(PLAYER_GOOD,TIMER1)
		ADD_PARTY_TO_LEVEL(PLAYER_GOOD,WANDERING_VAMPIRE,6,2)
		ADD_PARTY_TO_LEVEL(PLAYER_GOOD,WANDERING_VAMPIRE,7,2)
		QUICK_INFORMATION(6,"鉴于敌人的性质，他们的数量可能是无穷无尽的。毫无疑问，英雄们愚蠢地向他们提供了数十年的新鲜肉体和灵魂。所以你必须在被击溃之前推动你的仆从前进并占领敌人的位置。",PLAYER1)
	ENDIF
ENDIF

IF(PLAYER_GOOD,TIMER0 >= 2000)
	IF_SLAB_OWNER(62,51,PLAYER_GOOD)
		IF(PLAYER1,TOTAL_CREATURES >= 4)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_THIEF,-2,1)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE1,-2,1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER0)
		ENDIF
	ENDIF
 ENDIF

IF(PLAYER_GOOD,TIMER1 >= 2400)
	IF_SLAB_OWNER(62,70,PLAYER_GOOD)
		IF(PLAYER1,TOTAL_CREATURES >= 8)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_HEART,-2,1)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE2,-3,1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER1)
		ENDIF
	ENDIF
 ENDIF

IF_ACTION_POINT(3,PLAYER1)
	SET_TIMER(PLAYER_GOOD,TIMER2)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_GUARD,1,9)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_GUARD,2,9)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_GUARD,9,4)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,SKELETON_GUARD,8,4)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ELITE_VAMPIRE,10,2)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE1,-4,1)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE2,-4,1)
	QUICK_OBJECTIVE(7,"据称，吸血鬼之王凯斯勒因部落未能击退你们而大怒，当场杀死了数名爪牙。这可能会激励其他人更加努力。预计会遭遇更强烈的抵抗。",PLAYER1)
ENDIF

IF(PLAYER_GOOD,TIMER2 >= 1700)
	IF_SLAB_OWNER(14,37,PLAYER_GOOD)
		IF(PLAYER1,TOTAL_CREATURES >= 12)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE1,-4,1)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE2,-4,1)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,HORDE3,-4,1)
            NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_THIEF,-2,1)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,GHOST_HEART,-2,1)
			NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER2)
		ENDIF
	ENDIF
 ENDIF

IF(PLAYER1,GOOD_CREATURES >= 1)
	QUICK_INFORMATION(8,"幸存的英雄们仍然徘徊在这个领域，等死。将这些心怀怨恨的可怜人招募到你的军队中。",PLAYER1)
ENDIF

IF(PLAYER1,ENTRANCE == 18)
	MAX_CREATURES(PLAYER1,16)
ENDIF

IF(PLAYER1,BRIDGE > 1)
	ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,1,1)
	TUTORIAL_FLASH_BUTTON(18,100)
	QUICK_INFORMATION(9,"您现在可以接近部落的主要堡垒。",PLAYER1)
ENDIF

IF_ACTION_POINT(4,PLAYER1)
	SET_TIMER(PLAYER_GOOD,TIMER3)
	SET_CREATURE_STRENGTH(VAMPIRE,240)
	SET_CREATURE_HEALTH(VAMPIRE,5000)
	SET_CREATURE_ARMOUR(VAMPIRE,150)
	SET_CREATURE_PROPERTY(VAMPIRE,NEVER_CHICKENS,1)
	SET_CREATURE_PROPERTY(VAMPIRE,IMMUNE_TO_BOULDER,1)
	SET_CREATURE_PROPERTY(VAMPIRE,IMMUNE_TO_DISEASE,1)
	SET_CREATURE_PROPERTY(VAMPIRE,NO_IMPRISONMENT,1)
	SET_CREATURE_PROPERTY(VAMPIRE,ILLUMINATED,1)
	KILL_CREATURE(ALL_PLAYERS,VAMPIRE,ANYWHERE,100)
	SET_CREATURE_CONFIGURATION(VAMPIRE,AttackPreference,MELEE)
	SET_CREATURE_CONFIGURATION(VAMPIRE,BaseSpeed,30)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,DARK_SOULS,-1,1)
	QUICK_INFORMATION(10,"我感觉到吸血鬼之王凯斯勒正在靠近。",PLAYER1)
ENDIF

IF(PLAYER_GOOD,TIMER3 >= 400)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,KESSLER,-1,1)
	SET_FLAG(PLAYER_GOOD,FLAG0,1)
	SET_TIMER(PLAYER_GOOD,TIMER4)
	SET_TIMER(PLAYER_GOOD,TIMER5)
	SET_TIMER(PLAYER_GOOD,TIMER6)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ELITE_SKELETON,-1,1)
	ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ELITE_SPIDER,-1,1)
	QUICK_MESSAGE(11, "我将摧毁你那支弱小的军队，守护者。", Vampire)
ENDIF

IF(PLAYER_GOOD,TIMER4 >= 25000)
	IF(PLAYER1,ALL_DUNGEONS_DESTROYED == 0)
		IF(PLAYER_GOOD,TOTAL_CREATURES <= 12)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,DARK_SOULS,-1,1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER4)
		ENDIF
	ENDIF
 ENDIF
 
IF(PLAYER_GOOD,TIMER5 >= 1400)
	IF(PLAYER_GOOD,VAMPIRE >= 1)
		IF(PLAYER_GOOD,SKELETON <= 2)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ELITE_SKELETON,-1,1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER5)
		ENDIF
	ENDIF
 ENDIF
 
 IF(PLAYER_GOOD,TIMER6 >= 1200)
	IF(PLAYER_GOOD,VAMPIRE >= 1)
		IF(PLAYER_GOOD,SPIDER <= 2)
			NEXT_COMMAND_REUSABLE
            ADD_PARTY_TO_LEVEL(PLAYER_GOOD,ELITE_SPIDER,-1,1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER_GOOD,TIMER6)
		ENDIF
	ENDIF
 ENDIF

IF(PLAYER_GOOD,FLAG0 == 1)
	IF(PLAYER1,ALL_DUNGEONS_DESTROYED == 1)
		IF(PLAYER_GOOD,VAMPIRE == 0)
			WIN_GAME
			QUICK_OBJECTIVE(12,"你杀死了吸血鬼之王并摧毁了白色部落的地下城。由于你的行动，部落现已不复存在。",PLAYER1)
		ENDIF
	ENDIF
ENDIF