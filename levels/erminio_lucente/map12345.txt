LEVEL_VERSION(1)
SET_GENERATE_SPEED(280)
MAX_CREATURES(ALL_PLAYERS,999)
SET_MUSIC(2)

SET_ROOM_CONFIGURATION(LAIR,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(BRIDGE,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(GUARD_POST,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(ARENA,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(GARDEN,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(BARRACKS,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(GRAVEYARD,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(TEMPLE,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(SCAVENGER,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(TREASURE,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(WORKSHOP,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(TORTURE,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(PRISON,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(RESEARCH,Properties,HAS_NO_ENSIGN,1)
SET_ROOM_CONFIGURATION(TRAINING,Properties,HAS_NO_ENSIGN,1)

CONCEAL_MAP_RECT(PLAYER0,91,171,6,6)
CONCEAL_MAP_RECT(PLAYER0,91,64,6,6)
CONCEAL_MAP_RECT(PLAYER0,16,16,24,24)
CONCEAL_MAP_RECT(PLAYER0,163,16,24,24)
CONCEAL_MAP_RECT(PLAYER0,163,163,24,24)
CONCEAL_MAP_RECT(PLAYER0,16,163,24,24)

CONCEAL_MAP_RECT(PLAYER0,91,7,12,12)
CONCEAL_MAP_RECT(PLAYER0,172,88,12,12)
CONCEAL_MAP_RECT(PLAYER0,91,172,12,12)
CONCEAL_MAP_RECT(PLAYER0,7,88,12,12)

REM REVEAL_MAP_RECT(PLAYER0,155,25,12,12)
CREATURE_ENTRANCE_LEVEL(ALL_PLAYERS,1)

SET_GAME_RULE(ImpWorkExperience,300)
SET_GAME_RULE(RoomSellGoldBackPercent,100)
SET_GAME_RULE(MaxThingsInHand,64)
SET_GAME_RULE(AlliesShareDrop,1)
SET_GAME_RULE(AlliesShareVision,1)
SET_GAME_RULE(PlaceTrapsOnSubtiles,1)

COMPUTER_PLAYER(PLAYER1,0)
COMPUTER_PLAYER(PLAYER2,0)
COMPUTER_PLAYER(PLAYER3,0)

START_MONEY(PLAYER0,0)
START_MONEY(PLAYER1,0)
START_MONEY(PLAYER2,0)
START_MONEY(PLAYER3,0)
START_MONEY(PLAYER_GOOD,0)

ADD_CREATURE_TO_POOL(FLY,99)
ADD_CREATURE_TO_POOL(BUG,99)
ADD_CREATURE_TO_POOL(DEMONSPAWN,99)
ADD_CREATURE_TO_POOL(TROLL,99)
ADD_CREATURE_TO_POOL(SPIDER,99)
ADD_CREATURE_TO_POOL(HELL_HOUND,99)
ADD_CREATURE_TO_POOL(TENTACLE,99)
ADD_CREATURE_TO_POOL(SORCEROR,99)
ADD_CREATURE_TO_POOL(ORC,99)
ADD_CREATURE_TO_POOL(BILE_DEMON,99)
ADD_CREATURE_TO_POOL(DRAGON,99)
ADD_CREATURE_TO_POOL(DARK_MISTRESS,99)
ADD_CREATURE_TO_POOL(GHOST,99)
ADD_CREATURE_TO_POOL(SKELETON,99)
ADD_CREATURE_TO_POOL(VAMPIRE,99)
ADD_CREATURE_TO_POOL(HORNY,99)
ADD_CREATURE_TO_POOL(THIEF,99)
ADD_CREATURE_TO_POOL(TUNNELLER,0)
ADD_CREATURE_TO_POOL(DWARFA,99)
ADD_CREATURE_TO_POOL(ARCHER,99)
ADD_CREATURE_TO_POOL(BARBARIAN,99)
ADD_CREATURE_TO_POOL(MONK,99)
ADD_CREATURE_TO_POOL(FAIRY,99)
ADD_CREATURE_TO_POOL(WITCH,99)
ADD_CREATURE_TO_POOL(WIZARD,99)
ADD_CREATURE_TO_POOL(GIANT,99)
ADD_CREATURE_TO_POOL(SAMURAI,99)
ADD_CREATURE_TO_POOL(KNIGHT,99)
ADD_CREATURE_TO_POOL(TIME_MAGE,99)
ADD_CREATURE_TO_POOL(DRUID,99)
ADD_CREATURE_TO_POOL(AVATAR,0)

CREATURE_AVAILABLE(ALL_PLAYERS,FLY,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BUG,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DEMONSPAWN,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SORCEROR,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DRAGON,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DARK_MISTRESS,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GHOST,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SKELETON,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,VAMPIRE,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,HORNY,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DRUID,0,0)

CREATURE_AVAILABLE(ALL_PLAYERS,THIEF,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TUNNELLER,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,DWARFA,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ARCHER,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,BARBARIAN,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,MONK,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,FAIRY,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,WITCH,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,WIZARD,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,GIANT,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,SAMURAI,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,KNIGHT,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,AVATAR,0,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TIME_MAGE,0,0)

ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,LAIR,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,GARDEN,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,WORKSHOP,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,PRISON,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,TORTURE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,BARRACKS,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,TEMPLE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,GRAVEYARD,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,SCAVENGER,1,0)

MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SIGHT,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_OBEY,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CONCEAL,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HOLD_AUDIENCE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CAVE_IN,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_LIGHTNING,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_PROTECT,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CHICKEN,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_DISEASE,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_ARMAGEDDON,0,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_DESTROY_WALLS,1,0)

TRAP_AVAILABLE(ALL_PLAYERS,ALARM,0,0)
TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,LIGHTNING,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,LAVA,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,BOULDER,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,WORD_OF_POWER,1,0)

DOOR_AVAILABLE(ALL_PLAYERS,WOOD,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,BRACED,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,MAGIC,1,0)

QUICK_MESSAGE(1,"欢迎守护者，选择游戏参数，然后开始游戏。",None)


SET_CREATURE_PROPERTY(KNIGHT,LORD,0)
SET_CREATURE_PROPERTY(AVATAR,LORD,0)
SET_OBJECT_CONFIGURATION(SOUL_CONTAINER,MaximumSize,0)





##########################################################################################################
##########################################################################################################
##########################################################################################################
SET_POWER_CONFIGURATION(POWER_CALL_TO_ARMS,SoundPlayed,0)
rem COMPUTER_DIG_TO_LOCATION([player],[origin],[destination])

IF(PLAYER0,BOX1_ACTIVATED > 0)
IF(PLAYER0,TIMER1 >= 3000)
	IF(PLAYER0,BOX18_ACTIVATED > 0)
		IF(PLAYER0,BOX19_ACTIVATED == 0)
		SET_TIMER(PLAYER0,TIMER0)
			IF(PLAYER0,TIMER0 == 1000)
			NEXT_COMMAND_REUSABLE
			USE_POWER_AT_LOCATION(PLAYER_GOOD,14,POWER_CALL_TO_ARMS,9,1)
			NEXT_COMMAND_REUSABLE
			USE_POWER_AT_LOCATION(PLAYER1,15,POWER_CALL_TO_ARMS,9,1)
			NEXT_COMMAND_REUSABLE
			USE_POWER_AT_LOCATION(PLAYER2,16,POWER_CALL_TO_ARMS,9,1)
			NEXT_COMMAND_REUSABLE
			USE_POWER_AT_LOCATION(PLAYER3,17,POWER_CALL_TO_ARMS,9,1)
			ENDIF
				IF(PLAYER0,TIMER0 == 1400)
				NEXT_COMMAND_REUSABLE
				USE_POWER_AT_LOCATION(PLAYER1,18,POWER_CALL_TO_ARMS,9,1)
				NEXT_COMMAND_REUSABLE
				USE_POWER_AT_LOCATION(PLAYER2,19,POWER_CALL_TO_ARMS,9,1)
				NEXT_COMMAND_REUSABLE
				USE_POWER_AT_LOCATION(PLAYER3,20,POWER_CALL_TO_ARMS,9,1)
				NEXT_COMMAND_REUSABLE
				USE_POWER_AT_LOCATION(PLAYER_GOOD,21,POWER_CALL_TO_ARMS,9,1)
				ENDIF
					IF(PLAYER0,TIMER0 == 1800)
					NEXT_COMMAND_REUSABLE
					USE_POWER_AT_LOCATION(PLAYER1,22,POWER_CALL_TO_ARMS,9,1)
					NEXT_COMMAND_REUSABLE
					USE_POWER_AT_LOCATION(PLAYER2,23,POWER_CALL_TO_ARMS,9,1)
					NEXT_COMMAND_REUSABLE
					USE_POWER_AT_LOCATION(PLAYER3,24,POWER_CALL_TO_ARMS,9,1)
					NEXT_COMMAND_REUSABLE
					USE_POWER_AT_LOCATION(PLAYER_GOOD,25,POWER_CALL_TO_ARMS,9,1)
					ENDIF
						IF(PLAYER0,TIMER0 == 2200)
						NEXT_COMMAND_REUSABLE
						USE_POWER_AT_LOCATION(PLAYER1,26,POWER_CALL_TO_ARMS,9,1)
						NEXT_COMMAND_REUSABLE
						USE_POWER_AT_LOCATION(PLAYER2,27,POWER_CALL_TO_ARMS,9,1)
						NEXT_COMMAND_REUSABLE
						USE_POWER_AT_LOCATION(PLAYER3,28,POWER_CALL_TO_ARMS,9,1)
						NEXT_COMMAND_REUSABLE
						USE_POWER_AT_LOCATION(PLAYER_GOOD,29,POWER_CALL_TO_ARMS,9,1)
						ENDIF
						
							IF(PLAYER0,TIMER0 == 3000)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER_GOOD,POWER_CALL_TO_ARMS,0,0)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER1,POWER_CALL_TO_ARMS,0,0)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER2,POWER_CALL_TO_ARMS,0,0)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER3,POWER_CALL_TO_ARMS,0,0)
							
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER_GOOD,POWER_CALL_TO_ARMS,1,1)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER1,POWER_CALL_TO_ARMS,1,1)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER2,POWER_CALL_TO_ARMS,1,1)
							NEXT_COMMAND_REUSABLE
    						MAGIC_AVAILABLE(PLAYER3,POWER_CALL_TO_ARMS,1,1)
							NEXT_COMMAND_REUSABLE
							SET_TIMER(PLAYER0,TIMER0)
							ENDIF
		ENDIF
	ENDIF
ENDIF
ENDIF




##GAME SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
SET_BOX_TOOLTIP(1,"开始游戏")
SET_BOX_TOOLTIP(2,"清除场地")
SET_BOX_TOOLTIP(3,"加水")
SET_BOX_TOOLTIP(4,"加岩浆")
SET_BOX_TOOLTIP(5,"金矿场地")
SET_BOX_TOOLTIP(6,"加宝石矿")
SET_BOX_TOOLTIP(7,"魔法全开")
SET_BOX_TOOLTIP(8,"房间全开")
SET_BOX_TOOLTIP(9,"得到5000黄金")
SET_BOX_TOOLTIP(10,"得到10000黄金")
SET_BOX_TOOLTIP(11,"得到25000黄金")
SET_BOX_TOOLTIP(12,"得到无限黄金")
SET_BOX_TOOLTIP(13,"允许怪物")
SET_BOX_TOOLTIP(14,"允许英雄")
SET_BOX_TOOLTIP(15,"10级小鬼")
SET_BOX_TOOLTIP(16,"陷阱全开")
SET_BOX_TOOLTIP(17,"遭遇英雄")
SET_BOX_TOOLTIP(18,"遭遇怪物")
SET_BOX_TOOLTIP(19,"允许 CPU 建设")
SET_BOX_TOOLTIP(20,"得到圣者")
SET_BOX_TOOLTIP(21,"设置 CPU 忠诚度")
####################################
IF(PLAYER0,BOX2_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX3_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX4_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX5_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX6_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX7_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX8_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX9_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX10_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX11_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX12_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX13_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX14_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX15_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX16_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX17_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX18_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX19_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX20_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
IF(PLAYER0,BOX21_ACTIVATED > 0)
PLAY_MESSAGE(PLAYER0,SPEECH,80)
ENDIF
####################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
REVEAL_MAP_RECT(PLAYER0,91,64,12,12)
SET_MUSIC(DRAWFROM(2,3,4,5,6,7))
SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM,UpdateFunction,UPDATE_DUNGEON_HEART)
SET_OBJECT_CONFIGURATION(SOUL_CONTAINER,MaximumSize,525)
CHANGE_SLAB_TYPE(30,29,HEART_PEDESTAL,MATCH)
REM PLAY_MESSAGE(PLAYER0,SPEECH,66)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,1,1)

	IF(PLAYER0,BOX21_ACTIVATED > 0)
	ALLY_PLAYERS(PLAYER1,PLAYER2,1)
	ALLY_PLAYERS(PLAYER1,PLAYER3,1)
	ALLY_PLAYERS(PLAYER1,PLAYER_GOOD,1)
	ALLY_PLAYERS(PLAYER2,PLAYER3,1)
	ALLY_PLAYERS(PLAYER2,PLAYER1,1)
	ALLY_PLAYERS(PLAYER2,PLAYER_GOOD,1)
	ALLY_PLAYERS(PLAYER3,PLAYER1,1)
	ALLY_PLAYERS(PLAYER3,PLAYER2,1)
	ALLY_PLAYERS(PLAYER3,PLAYER_GOOD,1)
	ALLY_PLAYERS(PLAYER_GOOD,PLAYER1,1)
	ALLY_PLAYERS(PLAYER_GOOD,PLAYER2,1)
	ALLY_PLAYERS(PLAYER_GOOD,PLAYER3,1)
	ENDIF

IF(PLAYER0,BOX15_ACTIVATED > 0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,10,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,10,0)
ENDIF
IF(PLAYER0,BOX15_ACTIVATED == 0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,1,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,1,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,1,0)
ADD_CREATURE_TO_LEVEL(PLAYER0,IMP,1,1,1,0)
ENDIF
IF(PLAYER0,BOX20_ACTIVATED > 0)
ADD_CREATURE_TO_LEVEL(PLAYER0,AVATAR,1,1,1,0)
ENDIF

CHANGE_SLAB_TYPE(30,17,GOLD,MATCH)
	IF(PLAYER0,BOX3_ACTIVATED > 0)
	CHANGE_SLAB_TYPE(30,17,WATER,MATCH)
	ENDIF
	IF(PLAYER0,BOX4_ACTIVATED > 0)
	CHANGE_SLAB_TYPE(30,17,LAVA,MATCH)
	ENDIF
		IF(PLAYER0,BOX2_ACTIVATED > 0)
		CHANGE_SLAB_TYPE(22,29,PATH,MATCH)
		CHANGE_SLAB_TYPE(30,14,PATH,MATCH)
				IF(PLAYER0,BOX4_ACTIVATED == 0)
				IF(PLAYER0,BOX3_ACTIVATED == 0)
				CHANGE_SLAB_TYPE(30,17,GOLD,MATCH)
				ENDIF
				ENDIF
		ENDIF
		
		IF(PLAYER0,BOX5_ACTIVATED > 0)
		CHANGE_SLAB_TYPE(22,29,GOLD,MATCH)
		CHANGE_SLAB_TYPE(30,14,GOLD,MATCH)
				IF(PLAYER0,BOX4_ACTIVATED == 0)
				IF(PLAYER0,BOX3_ACTIVATED == 0)
				CHANGE_SLAB_TYPE(30,17,GOLD,MATCH)
				ENDIF
				ENDIF
		ENDIF
IF(PLAYER0,BOX6_ACTIVATED > 0)
CHANGE_SLAB_TYPE(30,26,GEMS,NONE)
CHANGE_SLAB_TYPE(33,29,GEMS,NONE)
CHANGE_SLAB_TYPE(30,32,GEMS,NONE)
CHANGE_SLAB_TYPE(27,29,GEMS,NONE)
ENDIF
	IF(PLAYER0,BOX7_ACTIVATED > 0)
	MAGIC_AVAILABLE(PLAYER0,POWER_HAND,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_SLAP,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_POSSESS,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_IMP,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_SIGHT,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_SPEED,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_OBEY,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_CALL_TO_ARMS,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_CONCEAL,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_HOLD_AUDIENCE,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_CAVE_IN,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_HEAL_CREATURE,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_LIGHTNING,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_PROTECT,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_CHICKEN,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_DISEASE,1,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_ARMAGEDDON,0,1)
	MAGIC_AVAILABLE(PLAYER0,POWER_DESTROY_WALLS,1,1)
	ENDIF
		IF(PLAYER0,BOX8_ACTIVATED > 0)
		ROOM_AVAILABLE(PLAYER0,TREASURE,1,1)
		ROOM_AVAILABLE(PLAYER0,LAIR,1,1)
		ROOM_AVAILABLE(PLAYER0,GARDEN,1,1)
		ROOM_AVAILABLE(PLAYER0,TRAINING,1,1)
		ROOM_AVAILABLE(PLAYER0,RESEARCH,1,1)
		ROOM_AVAILABLE(PLAYER0,BRIDGE,1,1)
		ROOM_AVAILABLE(PLAYER0,GUARD_POST,1,1)
		ROOM_AVAILABLE(PLAYER0,WORKSHOP,1,1)
		ROOM_AVAILABLE(PLAYER0,PRISON,1,1)
		ROOM_AVAILABLE(PLAYER0,TORTURE,1,1)
		ROOM_AVAILABLE(PLAYER0,BARRACKS,1,1)
		ROOM_AVAILABLE(PLAYER0,TEMPLE,1,1)
		ROOM_AVAILABLE(PLAYER0,GRAVEYARD,1,1)
		ROOM_AVAILABLE(PLAYER0,SCAVENGER,1,1)
		ENDIF
			IF(PLAYER0,BOX16_ACTIVATED > 0)
			TRAP_AVAILABLE(PLAYER0,ALARM,99,99)
			TRAP_AVAILABLE(PLAYER0,POISON_GAS,99,99)
			TRAP_AVAILABLE(PLAYER0,LIGHTNING,99,99)
			TRAP_AVAILABLE(PLAYER0,LAVA,99,99)
			TRAP_AVAILABLE(PLAYER0,BOULDER,99,99)
			TRAP_AVAILABLE(PLAYER0,WORD_OF_POWER,99,99)
			DOOR_AVAILABLE(PLAYER0,WOOD,99,99)
			DOOR_AVAILABLE(PLAYER0,BRACED,99,99)
			DOOR_AVAILABLE(PLAYER0,STEEL,99,99)
			DOOR_AVAILABLE(PLAYER0,MAGIC,99,99)
			ENDIF
				IF(PLAYER0,BOX9_ACTIVATED > 0)
				ADD_GOLD_TO_PLAYER(PLAYER0,5000)
				ENDIF
				IF(PLAYER0,BOX10_ACTIVATED > 0)
				ADD_GOLD_TO_PLAYER(PLAYER0,10000)
				ENDIF
				IF(PLAYER0,BOX11_ACTIVATED > 0)
				ADD_GOLD_TO_PLAYER(PLAYER0,25000)
				ENDIF
				IF(PLAYER0,BOX12_ACTIVATED > 0)
				NEXT_COMMAND_REUSABLE
				ADD_GOLD_TO_PLAYER(PLAYER0,50)
				ENDIF
			
					IF(PLAYER0,BOX13_ACTIVATED > 0)	
					CREATURE_AVAILABLE(PLAYER0,FLY,1,99)
					CREATURE_AVAILABLE(PLAYER0,BUG,1,99)
					CREATURE_AVAILABLE(PLAYER0,DEMONSPAWN,1,99)
					CREATURE_AVAILABLE(PLAYER0,TROLL,1,99)
					CREATURE_AVAILABLE(PLAYER0,SPIDER,1,99)
					CREATURE_AVAILABLE(PLAYER0,HELL_HOUND,1,99)
					CREATURE_AVAILABLE(PLAYER0,TENTACLE,1,99)
					CREATURE_AVAILABLE(PLAYER0,SORCEROR,1,99)
					CREATURE_AVAILABLE(PLAYER0,ORC,1,99)
					CREATURE_AVAILABLE(PLAYER0,BILE_DEMON,1,99)
					CREATURE_AVAILABLE(PLAYER0,DRAGON,1,99)
					CREATURE_AVAILABLE(PLAYER0,DARK_MISTRESS,1,99)
					CREATURE_AVAILABLE(PLAYER0,GHOST,1,99)
					CREATURE_AVAILABLE(PLAYER0,SKELETON,1,99)
					CREATURE_AVAILABLE(PLAYER0,VAMPIRE,1,99)
					CREATURE_AVAILABLE(PLAYER0,HORNY,1,99)
					CREATURE_AVAILABLE(PLAYER0,DRUID,1,99)
					ENDIF
						IF(PLAYER0,BOX14_ACTIVATED > 0)		
						CREATURE_AVAILABLE(PLAYER0,THIEF,1,99)
						CREATURE_AVAILABLE(PLAYER0,TUNNELLER,1,99)
						CREATURE_AVAILABLE(PLAYER0,DWARFA,1,99)
						CREATURE_AVAILABLE(PLAYER0,ARCHER,1,99)
						CREATURE_AVAILABLE(PLAYER0,BARBARIAN,1,99)
						CREATURE_AVAILABLE(PLAYER0,MONK,1,99)
						CREATURE_AVAILABLE(PLAYER0,FAIRY,1,99)
						CREATURE_AVAILABLE(PLAYER0,WITCH,1,99)
						CREATURE_AVAILABLE(PLAYER0,WIZARD,1,99)
						CREATURE_AVAILABLE(PLAYER0,GIANT,1,99)
						CREATURE_AVAILABLE(PLAYER0,SAMURAI,1,99)
						CREATURE_AVAILABLE(PLAYER0,KNIGHT,1,99)
						CREATURE_AVAILABLE(PLAYER0,AVATAR,1,0)
						CREATURE_AVAILABLE(PLAYER0,TIME_MAGE,1,99)
						ENDIF

	CONCEAL_MAP_RECT(PLAYER0,16,16,24,24)
	CONCEAL_MAP_RECT(PLAYER0,163,16,24,24)
	CONCEAL_MAP_RECT(PLAYER0,163,163,24,24)
	CONCEAL_MAP_RECT(PLAYER0,16,163,24,24)
	
	CONCEAL_MAP_RECT(PLAYER0,91,7,12,12)
	CONCEAL_MAP_RECT(PLAYER0,172,88,12,12)
	CONCEAL_MAP_RECT(PLAYER0,91,172,12,12)
	CONCEAL_MAP_RECT(PLAYER0,7,88,12,12)
ENDIF





















##AI SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX19_ACTIVATED > 0)
		
		NEXT_COMMAND_REUSABLE
		ADD_HEART_HEALTH(PLAYER_GOOD,50,0)
		NEXT_COMMAND_REUSABLE
		ADD_HEART_HEALTH(PLAYER1,50,0)
		NEXT_COMMAND_REUSABLE
		ADD_HEART_HEALTH(PLAYER2,50,0)
		NEXT_COMMAND_REUSABLE
		ADD_HEART_HEALTH(PLAYER3,50,0)
		NEXT_COMMAND_REUSABLE
		ADD_GOLD_TO_PLAYER(PLAYER_GOOD,1)
		NEXT_COMMAND_REUSABLE
		ADD_GOLD_TO_PLAYER(PLAYER1,1)
		NEXT_COMMAND_REUSABLE
		ADD_GOLD_TO_PLAYER(PLAYER2,1)
		NEXT_COMMAND_REUSABLE
		ADD_GOLD_TO_PLAYER(PLAYER3,1)
	
	CHANGE_SLAB_TYPE(5,5,LAIR_AREA,MATCH)
	CHANGE_SLAB_OWNER(5,5,PLAYER1,MATCH)
	CHANGE_SLAB_TYPE(54,5,LAIR_AREA,MATCH)
	CHANGE_SLAB_OWNER(54,5,PLAYER2,MATCH)
	CHANGE_SLAB_TYPE(54,54,LAIR_AREA,MATCH)
	CHANGE_SLAB_OWNER(54,54,PLAYER3,MATCH)
	CHANGE_SLAB_TYPE(5,54,LAIR_AREA,MATCH)
	CHANGE_SLAB_OWNER(5,54,PLAYER_GOOD,MATCH)
	
	CHANGE_SLAB_TYPE(55,4,PATH,MATCH)
	CHANGE_SLAB_TYPE(4,4,PATH,MATCH)
	CHANGE_SLAB_TYPE(4,55,PATH,MATCH)
	CHANGE_SLAB_TYPE(55,55,PATH,MATCH)
	CHANGE_SLAB_TYPE(4,1,GEMS,NONE)
	CHANGE_SLAB_TYPE(1,4,GEMS,NONE)
	CHANGE_SLAB_TYPE(55,1,GEMS,NONE)
	CHANGE_SLAB_TYPE(58,4,GEMS,NONE)
	CHANGE_SLAB_TYPE(4,58,GEMS,NONE)
	CHANGE_SLAB_TYPE(1,55,GEMS,NONE)
	CHANGE_SLAB_TYPE(58,55,GEMS,NONE)
	CHANGE_SLAB_TYPE(55,58,GEMS,NONE)
	ADD_CREATURE_TO_LEVEL(PLAYER1,IMP,2,1,1,0)
	ADD_CREATURE_TO_LEVEL(PLAYER2,IMP,3,1,1,0)
	ADD_CREATURE_TO_LEVEL(PLAYER3,IMP,4,1,1,0)
	REM ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,IMP,5,1,1,0)
	
	CHANGE_SLAB_TYPE(7,7,ENTRANCE_ZONE,MATCH)
		NEXT_COMMAND_REUSABLE
		CHANGE_SLAB_OWNER(7,7,PLAYER1,NONE)
	CHANGE_SLAB_TYPE(52,7,ENTRANCE_ZONE,MATCH)
		NEXT_COMMAND_REUSABLE
		CHANGE_SLAB_OWNER(52,7,PLAYER2,NONE)
	CHANGE_SLAB_TYPE(52,52,ENTRANCE_ZONE,MATCH)
		NEXT_COMMAND_REUSABLE
		CHANGE_SLAB_OWNER(52,52,PLAYER3,NONE)
	CHANGE_SLAB_TYPE(7,52,ENTRANCE_ZONE,MATCH)
		NEXT_COMMAND_REUSABLE
		CHANGE_SLAB_OWNER(7,52,PLAYER_GOOD,NONE)
		
	ADD_GOLD_TO_PLAYER(PLAYER1,50000)
	ADD_GOLD_TO_PLAYER(PLAYER2,50000)
	ADD_GOLD_TO_PLAYER(PLAYER3,50000)
	ADD_GOLD_TO_PLAYER(PLAYER_GOOD,50000)
	
	CREATURE_AVAILABLE(PLAYER1,THIEF,1,99)
	CREATURE_AVAILABLE(PLAYER1,TUNNELLER,1,99)
	CREATURE_AVAILABLE(PLAYER1,DWARFA,1,99)
	CREATURE_AVAILABLE(PLAYER1,ARCHER,1,99)
	CREATURE_AVAILABLE(PLAYER1,BARBARIAN,1,99)
	CREATURE_AVAILABLE(PLAYER1,MONK,1,99)
	CREATURE_AVAILABLE(PLAYER1,FAIRY,1,99)
	CREATURE_AVAILABLE(PLAYER1,WITCH,1,99)
	CREATURE_AVAILABLE(PLAYER1,WIZARD,1,99)
	CREATURE_AVAILABLE(PLAYER1,GIANT,1,99)
	CREATURE_AVAILABLE(PLAYER1,SAMURAI,1,99)
	CREATURE_AVAILABLE(PLAYER1,KNIGHT,1,99)
	CREATURE_AVAILABLE(PLAYER1,AVATAR,1,0)
	CREATURE_AVAILABLE(PLAYER1,FLY,1,99)
	CREATURE_AVAILABLE(PLAYER1,BUG,1,99)
	CREATURE_AVAILABLE(PLAYER1,DEMONSPAWN,1,99)
	CREATURE_AVAILABLE(PLAYER1,TROLL,1,99)
	CREATURE_AVAILABLE(PLAYER1,SPIDER,1,99)
	CREATURE_AVAILABLE(PLAYER1,HELL_HOUND,1,99)
	CREATURE_AVAILABLE(PLAYER1,TENTACLE,1,99)
	CREATURE_AVAILABLE(PLAYER1,SORCEROR,1,99)
	CREATURE_AVAILABLE(PLAYER1,ORC,1,99)
	CREATURE_AVAILABLE(PLAYER1,BILE_DEMON,1,99)
	CREATURE_AVAILABLE(PLAYER1,DRAGON,1,99)
	CREATURE_AVAILABLE(PLAYER1,DARK_MISTRESS,1,99)
	CREATURE_AVAILABLE(PLAYER1,GHOST,1,99)
	CREATURE_AVAILABLE(PLAYER1,SKELETON,1,99)
	CREATURE_AVAILABLE(PLAYER1,VAMPIRE,1,99)
	CREATURE_AVAILABLE(PLAYER1,HORNY,1,99)
	CREATURE_AVAILABLE(PLAYER1,DRUID,1,99)
	CREATURE_AVAILABLE(PLAYER1,TIME_MAGE,1,99)
	MAGIC_AVAILABLE(PLAYER1,POWER_IMP,1,1)
	CREATURE_AVAILABLE(PLAYER2,THIEF,1,99)
	CREATURE_AVAILABLE(PLAYER2,TUNNELLER,1,99)
	CREATURE_AVAILABLE(PLAYER2,DWARFA,1,99)
	CREATURE_AVAILABLE(PLAYER2,ARCHER,1,99)
	CREATURE_AVAILABLE(PLAYER2,BARBARIAN,1,99)
	CREATURE_AVAILABLE(PLAYER2,MONK,1,99)
	CREATURE_AVAILABLE(PLAYER2,FAIRY,1,99)
	CREATURE_AVAILABLE(PLAYER2,WITCH,1,99)
	CREATURE_AVAILABLE(PLAYER2,WIZARD,1,99)
	CREATURE_AVAILABLE(PLAYER2,GIANT,1,99)
	CREATURE_AVAILABLE(PLAYER2,SAMURAI,1,99)
	CREATURE_AVAILABLE(PLAYER2,KNIGHT,1,99)
	CREATURE_AVAILABLE(PLAYER2,AVATAR,1,0)
	CREATURE_AVAILABLE(PLAYER2,FLY,1,99)
	CREATURE_AVAILABLE(PLAYER2,BUG,1,99)
	CREATURE_AVAILABLE(PLAYER2,DEMONSPAWN,1,99)
	CREATURE_AVAILABLE(PLAYER2,TROLL,1,99)
	CREATURE_AVAILABLE(PLAYER2,SPIDER,1,99)
	CREATURE_AVAILABLE(PLAYER2,HELL_HOUND,1,99)
	CREATURE_AVAILABLE(PLAYER2,TENTACLE,1,99)
	CREATURE_AVAILABLE(PLAYER2,SORCEROR,1,99)
	CREATURE_AVAILABLE(PLAYER2,ORC,1,99)
	CREATURE_AVAILABLE(PLAYER2,BILE_DEMON,1,99)
	CREATURE_AVAILABLE(PLAYER2,DRAGON,1,99)
	CREATURE_AVAILABLE(PLAYER2,DARK_MISTRESS,1,99)
	CREATURE_AVAILABLE(PLAYER2,GHOST,1,99)
	CREATURE_AVAILABLE(PLAYER2,SKELETON,1,99)
	CREATURE_AVAILABLE(PLAYER2,VAMPIRE,1,99)
	CREATURE_AVAILABLE(PLAYER2,HORNY,1,99)
	CREATURE_AVAILABLE(PLAYER2,DRUID,1,99)
	CREATURE_AVAILABLE(PLAYER2,TIME_MAGE,1,99)
	MAGIC_AVAILABLE(PLAYER2,POWER_IMP,1,1)
	CREATURE_AVAILABLE(PLAYER3,DRUID,1,99)
	CREATURE_AVAILABLE(PLAYER3,TIME_MAGE,1,99)
	CREATURE_AVAILABLE(PLAYER3,THIEF,1,99)
	CREATURE_AVAILABLE(PLAYER3,TUNNELLER,1,99)
	CREATURE_AVAILABLE(PLAYER3,DWARFA,1,99)
	CREATURE_AVAILABLE(PLAYER3,ARCHER,1,99)
	CREATURE_AVAILABLE(PLAYER3,BARBARIAN,1,99)
	CREATURE_AVAILABLE(PLAYER3,MONK,1,99)
	CREATURE_AVAILABLE(PLAYER3,FAIRY,1,99)
	CREATURE_AVAILABLE(PLAYER3,WITCH,1,99)
	CREATURE_AVAILABLE(PLAYER3,WIZARD,1,99)
	CREATURE_AVAILABLE(PLAYER3,GIANT,1,99)
	CREATURE_AVAILABLE(PLAYER3,SAMURAI,1,99)
	CREATURE_AVAILABLE(PLAYER3,KNIGHT,1,99)
	CREATURE_AVAILABLE(PLAYER3,AVATAR,1,0)
	CREATURE_AVAILABLE(PLAYER3,FLY,1,99)
	CREATURE_AVAILABLE(PLAYER3,BUG,1,99)
	CREATURE_AVAILABLE(PLAYER3,DEMONSPAWN,1,99)
	CREATURE_AVAILABLE(PLAYER3,TROLL,1,99)
	CREATURE_AVAILABLE(PLAYER3,SPIDER,1,99)
	CREATURE_AVAILABLE(PLAYER3,HELL_HOUND,1,99)
	CREATURE_AVAILABLE(PLAYER3,TENTACLE,1,99)
	CREATURE_AVAILABLE(PLAYER3,SORCEROR,1,99)
	CREATURE_AVAILABLE(PLAYER3,ORC,1,99)
	CREATURE_AVAILABLE(PLAYER3,BILE_DEMON,1,99)
	CREATURE_AVAILABLE(PLAYER3,DRAGON,1,99)
	CREATURE_AVAILABLE(PLAYER3,DARK_MISTRESS,1,99)
	CREATURE_AVAILABLE(PLAYER3,GHOST,1,99)
	CREATURE_AVAILABLE(PLAYER3,SKELETON,1,99)
	CREATURE_AVAILABLE(PLAYER3,VAMPIRE,1,99)
	CREATURE_AVAILABLE(PLAYER3,HORNY,1,99)
	MAGIC_AVAILABLE(PLAYER3,POWER_IMP,1,1)
	CREATURE_AVAILABLE(PLAYER_GOOD,THIEF,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,TUNNELLER,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,DWARFA,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,ARCHER,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,BARBARIAN,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,MONK,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,FAIRY,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,WITCH,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,WIZARD,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,GIANT,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,SAMURAI,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,KNIGHT,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,AVATAR,1,0)
	CREATURE_AVAILABLE(PLAYER_GOOD,FLY,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,BUG,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,DEMONSPAWN,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,TROLL,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,SPIDER,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,HELL_HOUND,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,TENTACLE,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,SORCEROR,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,ORC,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,BILE_DEMON,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,DRAGON,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,DARK_MISTRESS,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,GHOST,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,SKELETON,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,VAMPIRE,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,HORNY,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,DRUID,1,99)
	CREATURE_AVAILABLE(PLAYER_GOOD,TIME_MAGE,1,99)
	MAGIC_AVAILABLE(PLAYER_GOOD,POWER_IMP,1,1)
	CONCEAL_MAP_RECT(PLAYER0,16,16,24,24)
	CONCEAL_MAP_RECT(PLAYER0,163,16,24,24)
	CONCEAL_MAP_RECT(PLAYER0,163,163,24,24)
	CONCEAL_MAP_RECT(PLAYER0,16,163,24,24)
	
	CONCEAL_MAP_RECT(PLAYER0,91,7,12,12)
	CONCEAL_MAP_RECT(PLAYER0,172,88,12,12)
	CONCEAL_MAP_RECT(PLAYER0,91,172,12,12)
	CONCEAL_MAP_RECT(PLAYER0,7,88,12,12)
	ENDIF
ENDIF

















IF(PLAYER0,BOX1_ACTIVATED > 0)
SET_TIMER(PLAYER0,TIMER1)
	IF(PLAYER0,TIMER1 >= 3000)





##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX17_ACTIVATED > 0)
#################################################
SET_TIMER(PLAYER_GOOD,TIMER0)
SET_TIMER(PLAYER_GOOD,TIMER2)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER_GOOD,FLAG0,13)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER_GOOD,FLAG1,4)
#################################################
IF(PLAYER_GOOD,TIMER0 > 60)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER_GOOD,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER_GOOD,TIMER0)
ENDIF
#################################################
			IF(PLAYER_GOOD,TIMER2 > 50)
				IF(PLAYER_GOOD,FLAG1 == 1)
					IF(PLAYER_GOOD,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WIZARD,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,MONK,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BARBARIAN,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ARCHER,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DWARFA,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WITCH,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GIANT,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FAIRY,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SAMURAI,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TIME_MAGE,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,KNIGHT,6,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TUNNELLER,6,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER2)
				ENDIF
				
				IF(PLAYER_GOOD,FLAG1 == 2)
					IF(PLAYER_GOOD,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WIZARD,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,MONK,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BARBARIAN,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ARCHER,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DWARFA,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WITCH,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GIANT,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FAIRY,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SAMURAI,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TIME_MAGE,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,KNIGHT,7,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TUNNELLER,7,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER2)
				ENDIF
				
				IF(PLAYER_GOOD,FLAG1 == 3)
					IF(PLAYER_GOOD,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WIZARD,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,MONK,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BARBARIAN,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ARCHER,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DWARFA,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WITCH,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GIANT,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FAIRY,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SAMURAI,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TIME_MAGE,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,KNIGHT,8,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TUNNELLER,8,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER2)
				ENDIF
				
				IF(PLAYER_GOOD,FLAG1 == 4)
					IF(PLAYER_GOOD,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WIZARD,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,MONK,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BARBARIAN,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ARCHER,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DWARFA,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,WITCH,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GIANT,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FAIRY,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SAMURAI,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TIME_MAGE,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,KNIGHT,9,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TUNNELLER,9,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER2)
				ENDIF
			ENDIF
#################################################
	ENDIF
ENDIF























SET_BOX_TOOLTIP(18,"ALLOW CREATURE ENCOUNTERS")
SET_BOX_TOOLTIP(19,"ENABLE ENEMY BUILDING AI")


##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX18_ACTIVATED > 0)
		IF(PLAYER0,BOX19_ACTIVATED == 0)
#################################################
SET_TIMER(PLAYER_GOOD,TIMER3)
SET_TIMER(PLAYER_GOOD,TIMER4)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER_GOOD,FLAG2,17)
#################################################
IF(PLAYER_GOOD,TIMER3 > 120)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER_GOOD,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER_GOOD,TIMER3)
ENDIF
#################################################
			IF(PLAYER_GOOD,TIMER4 > 120)
					IF(PLAYER_GOOD,FLAG2 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,HORNY,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,VAMPIRE,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SKELETON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GHOST,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DARK_MISTRESS,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DRAGON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BILE_DEMON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ORC,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SORCEROR,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TENTACLE,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,HELL_HOUND,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SPIDER,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TROLL,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 14)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FLY,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 15)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BUG,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 16)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DEMONSPAWN,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG2 == 17)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DRUID,11,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER4)
			ENDIF
#################################################
		ENDIF
	ENDIF
ENDIF
##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX19_ACTIVATED > 0)
#################################################
SET_TIMER(PLAYER_GOOD,TIMER5)
SET_TIMER(PLAYER_GOOD,TIMER6)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER_GOOD,FLAG3,17)
#################################################
IF(PLAYER_GOOD,TIMER5 > 150)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER_GOOD,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER_GOOD,TIMER5)
ENDIF
#################################################
			IF(PLAYER_GOOD,TIMER6 > 200)
					IF(PLAYER_GOOD,FLAG3 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,HORNY,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,VAMPIRE,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SKELETON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,GHOST,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DARK_MISTRESS,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DRAGON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BILE_DEMON,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,ORC,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SORCEROR,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TENTACLE,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,HELL_HOUND,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,SPIDER,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,TROLL,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 14)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,FLY,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 15)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,BUG,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 16)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DEMONSPAWN,11,1,1,0)
					ENDIF
					IF(PLAYER_GOOD,FLAG3 == 17)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,DRUID,11,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER_GOOD,TIMER6)
			ENDIF
#################################################
	ENDIF
ENDIF










































##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX18_ACTIVATED > 0)
#################################################
SET_TIMER(PLAYER1,TIMER0)
SET_TIMER(PLAYER1,TIMER1)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER1,FLAG0,17)
#################################################
IF(PLAYER1,TIMER1 > 120)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER1,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER1,TIMER1)
ENDIF
#################################################
			IF(PLAYER1,TIMER0 > 120)
					IF(PLAYER1,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,HORNY,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,VAMPIRE,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,SKELETON,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,GHOST,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,DARK_MISTRESS,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,DRAGON,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,BILE_DEMON,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,ORC,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,SORCEROR,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,TENTACLE,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,HELL_HOUND,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,SPIDER,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,TROLL,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 14)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,FLY,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 15)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,BUG,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 16)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,DEMONSPAWN,10,1,1,0)
					ENDIF
					IF(PLAYER1,FLAG0 == 17)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER1,DRUID,10,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER1,TIMER0)
			ENDIF
#################################################
	ENDIF
ENDIF





























##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX18_ACTIVATED > 0)
#################################################
SET_TIMER(PLAYER2,TIMER0)
SET_TIMER(PLAYER2,TIMER1)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER2,FLAG0,17)
#################################################
IF(PLAYER2,TIMER1 > 120)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER2,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER2,TIMER1)
ENDIF
#################################################
			IF(PLAYER2,TIMER0 > 120)
					IF(PLAYER2,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,HORNY,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,VAMPIRE,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,SKELETON,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,GHOST,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,DARK_MISTRESS,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,DRAGON,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,BILE_DEMON,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,ORC,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,SORCEROR,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,TENTACLE,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,HELL_HOUND,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,SPIDER,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,TROLL,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 14)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,FLY,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 15)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,BUG,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 16)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,DEMONSPAWN,12,1,1,0)
					ENDIF
					IF(PLAYER2,FLAG0 == 17)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER2,DRUID,12,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER2,TIMER0)
			ENDIF
#################################################
	ENDIF
ENDIF


					



















##ENCOUNTER SET UP
##########################################################################################################
##########################################################################################################
##########################################################################################################
IF(PLAYER0,BOX1_ACTIVATED > 0)
	IF(PLAYER0,BOX18_ACTIVATED > 0)
#################################################
SET_TIMER(PLAYER3,TIMER0)
SET_TIMER(PLAYER3,TIMER1)
NEXT_COMMAND_REUSABLE
RANDOMISE_FLAG(PLAYER3,FLAG0,17)
#################################################
IF(PLAYER3,TIMER1 > 120)
NEXT_COMMAND_REUSABLE
LEVEL_UP_CREATURE(PLAYER3,ANY_CREATURE,ANYWHERE,1)
NEXT_COMMAND_REUSABLE
SET_TIMER(PLAYER3,TIMER1)
ENDIF
#################################################
			IF(PLAYER3,TIMER0 > 120)
					IF(PLAYER3,FLAG0 == 1)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,HORNY,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 2)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,VAMPIRE,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 3)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,SKELETON,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 4)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,GHOST,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 5)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,DARK_MISTRESS,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 6)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,DRAGON,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 7)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,BILE_DEMON,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 8)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,ORC,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 9)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,SORCEROR,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 10)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,TENTACLE,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 11)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,HELL_HOUND,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 12)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,SPIDER,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 13)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,TROLL,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 14)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,FLY,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 15)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,BUG,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 16)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,DEMONSPAWN,13,1,1,0)
					ENDIF
					IF(PLAYER3,FLAG0 == 17)
					NEXT_COMMAND_REUSABLE
					ADD_CREATURE_TO_LEVEL(PLAYER3,DRUID,13,1,1,0)
					ENDIF
				NEXT_COMMAND_REUSABLE
				SET_TIMER(PLAYER3,TIMER0)
			ENDIF
#################################################
	ENDIF
ENDIF





#################################################
	ENDIF
ENDIF